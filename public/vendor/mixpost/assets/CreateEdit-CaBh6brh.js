import{A as z,o as h,c as w,e as c,G as F,q as _e,g as V,w as u,v as q,b as l,H as T,a,I as ue,J as We,C as B,K as Je,L as Xe,F as j,r as Ye,M as Qe,j as Z,f as k,t as v,N as te,s as G,k as oe,O as ce,Q as et,R as tt,S as Ie,U as D,V as Ve,W as st,y as U,Y as nt,u as ye,i as J,$ as Be,T as ke,l as re,a0 as ot,x as Ee,a1 as Oe,n as we,a2 as rt,a3 as it,a4 as lt,P as at,m as ut,d as dt,Z as ct}from"./app-BxavtTYs.js";import{_ as pt}from"./Admin-CpLrPT1Z.js";import{u as mt}from"./usePageMode-DpBFnaK0.js";import{_ as ft}from"./PageHeader-BnI1hV_t.js";import{_ as me}from"./Panel-Lw-nuda0.js";import{T as xe}from"./Trash-B9tkDRbU.js";import{A as gt}from"./ArrowTopRightOnSquare-IL6rJNOT.js";import{_ as E}from"./VerticalGroup-DHZRXNYR.js";import{_ as de}from"./Select-B7cBiASc.js";import{_ as ge}from"./LabelSuffix-CL1UEugD.js";import{_ as Re}from"./Textarea-BQg5Wyvs.js";import{H as ht,D as vt}from"./index-Dm9xgFsu.js";import{n as Pe}from"./index.browser-DP16PUbO.js";import{_ as bt,L as _t}from"./ListItem-Ch3jcTq1.js";import{_ as Ne}from"./NoResult-DNS5zprA.js";import{N as O,m as H,w as se,M as K,a as X,b as Y,g as De,S as ne,t as he,P as Ae,c as yt,T as W,d as kt,E as pe,k as wt,e as Ce,F as ve,f as $e,D as xt,h as At,i as Ct,j as $t,l as Mt,n as Fe,o as Lt,p as Tt,q as Ht,r as be,s as St,V as zt,u as It,v as Vt,L as Bt,x as Et}from"./index-CSZup35c.js";import{H as Ot}from"./index-D-N4ZZ11.js";import{_ as Rt}from"./UploadButton-KFad3GKx.js";import"./QueueList-CJbQdoC3.js";import"./Flex-0eM5h-qJ.js";import"./vue.runtime.esm-bundler-DpHW48Ps.js";const Pt={},Nt={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 7 18"};function Dt(t,e){return h(),w("svg",Nt,e[0]||(e[0]=[c("path",{d:"M2.10477 13.5C1.48483 13.5 0.982269 12.9963 0.982269 12.375C0.982269 11.7537 1.48483 11.25 2.10477 11.25C2.72472 11.25 3.22728 11.7537 3.22728 12.375C3.22728 12.9963 2.72472 13.5 2.10477 13.5ZM2.10477 6C1.48483 6 0.982269 5.49632 0.982269 4.875C0.982269 4.25368 1.48483 3.75 2.10477 3.75C2.72472 3.75 3.22728 4.25368 3.22728 4.875C3.22728 5.49632 2.72472 6 2.10477 6ZM2.10477 2.25C1.48483 2.25 0.982269 1.74632 0.982269 1.125C0.982269 0.50368 1.48483 0 2.10477 0C2.72472 0 3.22728 0.50368 3.22728 1.125C3.22728 1.74632 2.72472 2.25 2.10477 2.25ZM2.10477 17.25C1.48483 17.25 0.982269 16.7463 0.982269 16.125C0.982269 15.5037 1.48483 15 2.10477 15C2.72472 15 3.22728 15.5037 3.22728 16.125C3.22728 16.7463 2.72472 17.25 2.10477 17.25ZM2.10477 9.75C1.48483 9.75 0.982269 9.24632 0.982269 8.625C0.982269 8.00368 1.48483 7.5 2.10477 7.5C2.72472 7.5 3.22728 8.00368 3.22728 8.625C3.22728 9.24632 2.72472 9.75 2.10477 9.75ZM5.84646 13.5C5.22652 13.5 4.72395 12.9963 4.72395 12.375C4.72395 11.7537 5.22652 11.25 5.84646 11.25C6.4664 11.25 6.96897 11.7537 6.96897 12.375C6.96897 12.9963 6.4664 13.5 5.84646 13.5ZM5.84646 6C5.22652 6 4.72395 5.49632 4.72395 4.875C4.72395 4.25368 5.22652 3.75 5.84646 3.75C6.4664 3.75 6.96897 4.25368 6.96897 4.875C6.96897 5.49632 6.4664 6 5.84646 6ZM5.84646 2.25C5.22652 2.25 4.72395 1.74632 4.72395 1.125C4.72395 0.50368 5.22652 0 5.84646 0C6.4664 0 6.96897 0.50368 6.96897 1.125C6.96897 1.74632 6.4664 2.25 5.84646 2.25ZM5.84646 17.25C5.22652 17.25 4.72395 16.7463 4.72395 16.125C4.72395 15.5037 5.22652 15 5.84646 15C6.4664 15 6.96897 15.5037 6.96897 16.125C6.96897 16.7463 6.4664 17.25 5.84646 17.25ZM5.84646 9.75C5.22652 9.75 4.72395 9.24632 4.72395 8.625C4.72395 8.00368 5.22652 7.5 5.84646 7.5C6.4664 7.5 6.96897 8.00368 6.96897 8.625C6.96897 9.24632 6.4664 9.75 5.84646 9.75Z",fill:"currentColor"},null,-1)]))}const Ft=z(Pt,[["render",Dt]]),qt=/^\s*>\s$/,Ut=O.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",H(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[se({find:qt,type:this.type})]}}),jt=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Zt=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Gt=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Kt=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Wt=K.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",H(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[X({find:jt,type:this.type}),X({find:Gt,type:this.type})]},addPasteRules(){return[Y({find:Zt,type:this.type}),Y({find:Kt,type:this.type})]}}),Jt=O.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",H(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Le=K.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",H(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const s=De(t,this.type);return Object.entries(s).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),Te=/^\s*([-+*])\s$/,Xt=O.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",H(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Jt.name,this.editor.getAttributes(Le.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=se({find:Te,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=se({find:Te,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Le.name),editor:this.editor})),[t]}}),Yt=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,Qt=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,es=K.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",H(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[X({find:Yt,type:this.type})]},addPasteRules(){return[Y({find:Qt,type:this.type})]}}),ts=/^```([a-z]+)?[\s\n]$/,ss=/^~~~([a-z]+)?[\s\n]$/,ns=O.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:s}=this.options,n=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(d=>d.startsWith(s)).map(d=>d.replace(s,""))[0];return n||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",H(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,s=e.pos===1;return!t||e.parent.type.name!==this.name?!1:s||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:s}=e,{$from:r,empty:i}=s;if(!i||r.parent.type!==this.type)return!1;const n=r.parentOffset===r.parent.nodeSize-2,d=r.parent.textContent.endsWith(`

`);return!n||!d?!1:t.chain().command(({tr:m})=>(m.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:s,doc:r}=e,{$from:i,empty:n}=s;if(!n||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const m=i.after();return m===void 0?!1:r.nodeAt(m)?t.commands.command(({tr:o})=>(o.setSelection(ne.near(r.resolve(m))),!0)):t.commands.exitCode()}}},addInputRules(){return[he({find:ts,type:this.type,getAttributes:t=>({language:t[1]})}),he({find:ss,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Ae({key:new yt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const s=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,n=i==null?void 0:i.mode;if(!s||!n)return!1;const{tr:d,schema:m}=t.state,g=m.text(s.replace(/\r\n?/g,`
`));return d.replaceSelectionWith(this.type.create({language:n},g)),d.selection.$from.parent.type!==this.type&&d.setSelection(W.near(d.doc.resolve(Math.max(0,d.selection.from-2)))),d.setMeta("paste",!0),t.dispatch(d),!0}}})]}});function os(t={}){return new Ae({view(e){return new rs(e,t)}})}class rs{constructor(e,s){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=s.width)!==null&&r!==void 0?r:1,this.color=s.color===!1?void 0:s.color||"black",this.class=s.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let n=d=>{this[i](d)};return e.dom.addEventListener(i,n),{name:i,handler:n}})}destroy(){this.handlers.forEach(({name:e,handler:s})=>this.editorView.dom.removeEventListener(e,s))}update(e,s){this.cursorPos!=null&&s.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),s=!e.parent.inlineContent,r;if(s){let m=e.nodeBefore,g=e.nodeAfter;if(m||g){let o=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(o){let f=o.getBoundingClientRect(),p=m?f.bottom:f.top;m&&g&&(p=(p+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:f.left,right:f.right,top:p-this.width/2,bottom:p+this.width/2}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos);r={left:m.left-this.width/2,right:m.left+this.width/2,top:m.top,bottom:m.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",s),this.element.classList.toggle("prosemirror-dropcursor-inline",!s);let n,d;if(!i||i==document.body&&getComputedStyle(i).position=="static")n=-pageXOffset,d=-pageYOffset;else{let m=i.getBoundingClientRect();n=m.left-i.scrollLeft,d=m.top-i.scrollTop}this.element.style.left=r.left-n+"px",this.element.style.top=r.top-d+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let s=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=s&&s.inside>=0&&this.editorView.state.doc.nodeAt(s.inside),i=r&&r.type.spec.disableDropCursor,n=typeof i=="function"?i(this.editorView,s,e):i;if(s&&!n){let d=s.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let m=kt(this.editorView.state.doc,d,this.editorView.dragging.slice);m!=null&&(d=m)}this.setCursor(d),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const is=pe.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[os(this.options)]}});class $ extends ne{constructor(e){super(e,e)}map(e,s){let r=e.resolve(s.map(this.head));return $.valid(r)?new $(r):ne.near(r)}content(){return $e.empty}eq(e){return e instanceof $&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new $(e.resolve(s.pos))}getBookmark(){return new Me(this.anchor)}static valid(e){let s=e.parent;if(s.isTextblock||!ls(e)||!as(e))return!1;let r=s.type.spec.allowGapCursor;if(r!=null)return r;let i=s.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,s,r=!1){e:for(;;){if(!r&&$.valid(e))return e;let i=e.pos,n=null;for(let d=e.depth;;d--){let m=e.node(d);if(s>0?e.indexAfter(d)<m.childCount:e.index(d)>0){n=m.child(s>0?e.indexAfter(d):e.index(d)-1);break}else if(d==0)return null;i+=s;let g=e.doc.resolve(i);if($.valid(g))return g}for(;;){let d=s>0?n.firstChild:n.lastChild;if(!d){if(n.isAtom&&!n.isText&&!Ce.isSelectable(n)){e=e.doc.resolve(i+n.nodeSize*s),r=!1;continue e}break}n=d,i+=s;let m=e.doc.resolve(i);if($.valid(m))return m}return null}}}$.prototype.visible=!1;$.findFrom=$.findGapCursorFrom;ne.jsonID("gapcursor",$);class Me{constructor(e){this.pos=e}map(e){return new Me(e.map(this.pos))}resolve(e){let s=e.resolve(this.pos);return $.valid(s)?new $(s):ne.near(s)}}function ls(t){for(let e=t.depth;e>=0;e--){let s=t.index(e),r=t.node(e);if(s==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(s-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function as(t){for(let e=t.depth;e>=0;e--){let s=t.indexAfter(e),r=t.node(e);if(s==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(s);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function us(){return new Ae({props:{decorations:ms,createSelectionBetween(t,e,s){return e.pos==s.pos&&$.valid(s)?new $(s):null},handleClick:cs,handleKeyDown:ds,handleDOMEvents:{beforeinput:ps}}})}const ds=wt({ArrowLeft:le("horiz",-1),ArrowRight:le("horiz",1),ArrowUp:le("vert",-1),ArrowDown:le("vert",1)});function le(t,e){const s=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,n){let d=r.selection,m=e>0?d.$to:d.$from,g=d.empty;if(d instanceof W){if(!n.endOfTextblock(s)||m.depth==0)return!1;g=!1,m=r.doc.resolve(e>0?m.after():m.before())}let o=$.findGapCursorFrom(m,e,g);return o?(i&&i(r.tr.setSelection(new $(o))),!0):!1}}function cs(t,e,s){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!$.valid(r))return!1;let i=t.posAtCoords({left:s.clientX,top:s.clientY});return i&&i.inside>-1&&Ce.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new $(r))),!0)}function ps(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof $))return!1;let{$from:s}=t.state.selection,r=s.parent.contentMatchAt(s.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=ve.empty;for(let d=r.length-1;d>=0;d--)i=ve.from(r[d].createAndFill(null,i));let n=t.state.tr.replace(s.pos,s.pos,new $e(i,0,0));return n.setSelection(W.near(n.doc.resolve(s.pos+1))),t.dispatch(n),!1}function ms(t){if(!(t.selection instanceof $))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",xt.create(t.doc,[At.widget(t.selection.head,e,{key:"gapcursor"})])}const fs=pe.create({name:"gapCursor",addProseMirrorPlugins(){return[us()]},extendNodeSchema(t){var e;const s={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ct($t(t,"allowGapCursor",s)))!==null&&e!==void 0?e:null}}}),gs=O.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,H(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>he({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),hs=O.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",H(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:s}=e,{$from:r,$to:i}=s,n=t();return r.parentOffset===0?n.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):Mt(s)?n.insertContentAt(i.pos,{type:this.name}):n.insertContent({type:this.name}),n.command(({tr:d,dispatch:m})=>{var g;if(m){const{$to:o}=d.selection,f=o.end();if(o.nodeAfter)o.nodeAfter.isTextblock?d.setSelection(W.create(d.doc,o.pos+1)):o.nodeAfter.isBlock?d.setSelection(Ce.create(d.doc,o.pos)):d.setSelection(W.create(d.doc,o.pos));else{const p=(g=o.parent.type.contentMatch.defaultType)===null||g===void 0?void 0:g.create();p&&(d.insert(f,p),d.setSelection(W.create(d.doc,f+1)))}d.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Fe({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),vs=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,bs=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,_s=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ys=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,ks=K.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",H(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[X({find:vs,type:this.type}),X({find:_s,type:this.type})]},addPasteRules(){return[Y({find:bs,type:this.type}),Y({find:ys,type:this.type})]}}),ws=O.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",H(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),xs=O.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",H(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),He=K.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",H(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const s=De(t,this.type);return Object.entries(s).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),Se=/^(\d+)\.\s$/,As=O.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...s}=t;return e===1?["ol",H(this.options.HTMLAttributes,s),0]:["ol",H(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(xs.name,this.editor.getAttributes(He.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=se({find:Se,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,s)=>s.childCount+s.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=se({find:Se,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(He.name)}),joinPredicate:(e,s)=>s.childCount+s.attrs.start===+e[1],editor:this.editor})),[t]}}),Cs=O.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",H(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),$s=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Ms=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Ls=K.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",H(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[X({find:$s,type:this.type})]},addPasteRules(){return[Y({find:Ms,type:this.type})]}}),Ts=pe.create({name:"starterKit",addExtensions(){var t,e,s,r,i,n,d,m,g,o,f,p,A,C,I,L,y,_;const b=[];return this.options.bold!==!1&&b.push(Wt.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&b.push(Ut.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&b.push(Xt.configure((s=this.options)===null||s===void 0?void 0:s.bulletList)),this.options.code!==!1&&b.push(es.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&b.push(ns.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&b.push(Lt.configure((n=this.options)===null||n===void 0?void 0:n.document)),this.options.dropcursor!==!1&&b.push(is.configure((d=this.options)===null||d===void 0?void 0:d.dropcursor)),this.options.gapcursor!==!1&&b.push(fs.configure((m=this.options)===null||m===void 0?void 0:m.gapcursor)),this.options.hardBreak!==!1&&b.push(Ot.configure((g=this.options)===null||g===void 0?void 0:g.hardBreak)),this.options.heading!==!1&&b.push(gs.configure((o=this.options)===null||o===void 0?void 0:o.heading)),this.options.history!==!1&&b.push(ht.configure((f=this.options)===null||f===void 0?void 0:f.history)),this.options.horizontalRule!==!1&&b.push(hs.configure((p=this.options)===null||p===void 0?void 0:p.horizontalRule)),this.options.italic!==!1&&b.push(ks.configure((A=this.options)===null||A===void 0?void 0:A.italic)),this.options.listItem!==!1&&b.push(ws.configure((C=this.options)===null||C===void 0?void 0:C.listItem)),this.options.orderedList!==!1&&b.push(As.configure((I=this.options)===null||I===void 0?void 0:I.orderedList)),this.options.paragraph!==!1&&b.push(Cs.configure((L=this.options)===null||L===void 0?void 0:L.paragraph)),this.options.strike!==!1&&b.push(Ls.configure((y=this.options)===null||y===void 0?void 0:y.strike)),this.options.text!==!1&&b.push(Tt.configure((_=this.options)===null||_===void 0?void 0:_.text)),b}}),Hs=K.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",H(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Ss=pe.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign||this.options.defaultAlignment;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${t.textAlign}`}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(s=>e.updateAttributes(s,{textAlign:t})).every(s=>s):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),zs=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Is=O.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",H(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[Fe({find:zs,type:this.type,getAttributes:t=>{const[,,e,s,r]=t;return{src:s,alt:e,title:r}}})]}}),S={INLINE:"inline",CENTER:"center",FLOAT_LEFT:"left",FLOAT_RIGHT:"right"},fe={};function Vs(t){return new Promise((e,s)=>{const r={complete:!1,width:0,height:0,src:t};if(!t){s(r);return}if(fe[t]){e({...fe[t]});return}const i=new Image;i.onload=()=>{r.width=i.width,r.height=i.height,r.complete=!0,fe[t]={...r},e(r)},i.onerror=()=>{s(r)},i.src=t})}function Bs(t,e,s){return t<e?e:t>s?s:t}const Es=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/,Os=null,Rs=S.INLINE,Ps={},Ns={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function Ds(t,e){return h(),w("svg",Ns,e[0]||(e[0]=[c("path",{d:"M4 19h16v2H4zm5-4h11v2H9zm-5-4h16v2H4zm0-8h16v2H4zm5 4h11v2H9z"},null,-1)]))}const qe=z(Ps,[["render",Ds]]),Fs={},qs={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function Us(t,e){return h(),w("svg",qs,e[0]||(e[0]=[c("path",{d:"M4 19h16v2H4zm3-4h10v2H7zm-3-4h16v2H4zm0-8h16v2H4zm3 4h10v2H7z"},null,-1)]))}const Ue=z(Fs,[["render",Us]]),js={},Zs={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function Gs(t,e){return h(),w("svg",Zs,e[0]||(e[0]=[c("path",{d:"M4 19h16v2H4zm0-4h11v2H4zm0-4h16v2H4zm0-8h16v2H4zm0 4h11v2H4z"},null,-1)]))}const je=z(js,[["render",Gs]]),Ks={class:"p-md bg-white"},Ws={class:"editorClassicMenu flex gap-xs"},Js={__name:"ImageMenu",props:{editor:{required:!0,type:Ht},node:be.node,updateAttributes:be.updateAttributes,deleteNode:{required:!0,type:Function},selected:{required:!0,type:Boolean}},setup(t){const e=t,s=F(()=>e.node.attrs.display),r=n=>{if(n===s.value){e.updateAttributes({display:S.INLINE});return}e.updateAttributes({display:n})},i=()=>{e.deleteNode()};return(n,d)=>{const m=_e("tooltip");return h(),V(l(We),{triggers:[],shown:t.selected,autoHide:!1},{popper:u(({hide:g})=>[c("div",Ks,[c("div",Ws,[q((h(),w("button",{onClick:d[0]||(d[0]=o=>r(l(S).FLOAT_LEFT)),class:T({"is-active":l(S).FLOAT_LEFT===s.value}),type:"button"},[a(je)],2)),[[m,n.$t("editor.align_left")]]),q((h(),w("button",{onClick:d[1]||(d[1]=o=>r(l(S).CENTER)),class:T({"is-active":l(S).CENTER===s.value}),type:"button"},[a(Ue)],2)),[[m,n.$t("editor.align_center")]]),q((h(),w("button",{onClick:d[2]||(d[2]=o=>r(l(S).FLOAT_RIGHT)),class:T({"is-active":l(S).FLOAT_RIGHT===s.value}),type:"button"},[a(qe)],2)),[[m,n.$t("editor.align_right")]]),q((h(),V(ue,{onClick:i,destructive:""},{default:u(()=>[a(xe)]),_:1})),[[m,n.$t("editor.remove_image")]])])])]),_:1},8,["shown"])}}},Xs={class:"drag-handle",contentEditable:"false",draggable:"true","data-drag-handle":""},Ys=["src","title","alt","width","height","data-display"],Qs={key:0,class:"border border-primary-500 h-full left-0 absolute top-0 w-full z-10"},en=["onMousedown"],ae=20,ze=1e5,tn={__name:"Image",props:{...be},setup(t){const e=t,s={TOP_LEFT:"tl",TOP_RIGHT:"tr",BOTTOM_LEFT:"bl",BOTTOM_RIGHT:"br"},r=F(()=>e.node.attrs.src),i=F(()=>e.node.attrs.width),n=F(()=>e.node.attrs.height),d=F(()=>e.node.attrs.display),m=F(()=>({"float-none inline-block":d.value===S.INLINE,"flex justify-center":d.value===S.CENTER,"float-left ml-0 mr-md":d.value===S.FLOAT_LEFT,"float-right ml-xs mr-0":d.value===S.FLOAT_RIGHT})),g=B({width:0,height:0}),o=B({width:ze,height:ze}),f=B(!1);Je(async()=>{const x=await Vs(r.value);x.complete||(x.width=ae,x.height=ae),g.value={width:x.width,height:x.height}});const p=()=>{const{width:x}=getComputedStyle(e.editor.view.dom);o.value=parseInt(x,10)},A=()=>{e.editor.commands.setNodeSelection(e.getPos())};Xe(()=>{p()});const C=B({x:0,y:0,w:0,h:0,dir:""}),I=(x,ie)=>{x.preventDefault(),x.stopPropagation(),C.value.x=x.clientX,C.value.y=x.clientY;const P=g.value.width,Q=g.value.height,ee=P/Q;let{width:M,height:N}=e.node.attrs;const R=o.value.width;M&&!N?(M=M>R?R:M,N=Math.round(M/ee)):N&&!M?(M=Math.round(N*ee),M=M>R?R:M):!M&&!N?(M=P>R?R:P,N=Math.round(M/ee)):M=M>R?R:M,C.value.w=M,C.value.h=N,C.value.dir=ie,f.value=!0,_()},L=x=>{if(x.preventDefault(),x.stopPropagation(),!f.value)return;const{x:ie,y:P,w:Q,h:ee,dir:M}=C.value,N=(x.clientX-ie)*(/l/.test(M)?-1:1),R=(x.clientY-P)*(/t/.test(M)?-1:1);e.updateAttributes({width:Bs(Q+N,ae,o.value.width),height:Math.max(ee+R,ae)})},y=x=>{x.preventDefault(),x.stopPropagation(),f.value&&(f.value=!1,C.value={x:0,y:0,w:0,h:0,dir:""},b(),A())},_=()=>{document.addEventListener("mousemove",L,!0),document.addEventListener("mouseup",y,!0)},b=()=>{document.removeEventListener("mousemove",L,!0),document.removeEventListener("mouseup",y,!0)};return(x,ie)=>(h(),V(l(St),{as:"span",class:T([m.value,"leading-none max-w-full select-none align-baseline"])},{default:u(()=>[c("figure",Xs,[c("div",{class:T(["relative inline-block clear-both max-w-full outline-solid outline-1",{"outline-primary-500":x.selected}])},[c("img",{src:r.value,title:x.node.attrs.title,alt:x.node.attrs.alt,width:i.value,height:n.value,"data-display":x.node.attrs.display,class:"cursor-pointer m-0",onClick:A},null,8,Ys),x.editor.isEditable?q((h(),w("div",Qs,[(h(),w(j,null,Ye(s,P=>c("span",{key:P,class:T(["bg-primary-500 border border-white rounded box-border block h-sm w-sm absolute z-10",{tl:"left-[-6px] top-[-6px] cursor-nwse-resize",tr:"right-[-6px] top-[-6px] cursor-nesw-resize",bl:"left-[-6px] bottom-[-6px] cursor-nesw-resize",br:"right-[-6px] bottom-[-6px] cursor-nwse-resize"}[P]]),onMousedown:Q=>I(Q,P)},null,42,en)),64))],512)),[[Qe,x.selected||f.value]]):Z("",!0),a(Js,{editor:x.editor,node:x.node,selected:x.selected,updateAttributes:x.updateAttributes,deleteNode:x.deleteNode},null,8,["editor","node","selected","updateAttributes","deleteNode"])],2)])]),_:1},8,["class"]))}},sn=Is.extend({inline(){return!0},group(){return"inline"},addAttributes(){var t;return{...(t=this.parent)==null?void 0:t.call(this),width:{default:Os,parseHTML:e=>{const s=e.style.width||e.getAttribute("width")||null;return s==null?null:parseInt(s,10)},renderHTML:e=>({width:e.width})},height:{default:null,parseHTML:e=>{const s=e.style.height||e.getAttribute("height")||null;return s==null?null:parseInt(s,10)},renderHTML:e=>({height:e.height})},display:{default:Rs,parseHTML:e=>{const{cssFloat:s,display:r}=e.style;let i=e.getAttribute("data-display")||e.getAttribute("display");return i?i=/(inline|center|left|right)/.test(i)?i:S.INLINE:s==="left"&&!r?i=S.FLOAT_LEFT:s==="right"&&!r?i=S.FLOAT_RIGHT:!s&&r==="center"?i=S.CENTER:i=S.INLINE,i},renderHTML:e=>({"data-display":e.display})}}},addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),inline:!0,urlPattern:Es}},addNodeView(){return zt(tn)},parseHTML(){return[{tag:"img[src]"}]}}),nn={},on={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function rn(t,e){return h(),w("svg",on,e[0]||(e[0]=[c("path",{d:"M17.061,11.22C17.641,10.462,18,9.526,18,8.5C18,6.019,15.981,4,13.5,4H6v15h8c2.481,0,4.5-2.019,4.5-4.5 C18.5,13.203,17.94,12.042,17.061,11.22z M13.5,7C14.327,7,15,7.673,15,8.5S14.327,10,13.5,10H9V7H13.5z M14,16H9v-3h5 c0.827,0,1.5,0.673,1.5,1.5S14.827,16,14,16z"},null,-1)]))}const ln=z(nn,[["render",rn]]),an={},un={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function dn(t,e){return h(),w("svg",un,e[0]||(e[0]=[c("path",{d:"M19 7L19 4 9 4 9 7 11.868 7 9.012 17 5 17 5 20 15 20 15 17 12.132 17 14.988 7z"},null,-1)]))}const cn=z(an,[["render",dn]]),pn={},mn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function fn(t,e){return h(),w("svg",mn,e[0]||(e[0]=[c("path",{d:"M5 18H19V20H5zM6 4v6c0 3.309 2.691 6 6 6s6-2.691 6-6V4h-2v6c0 2.206-1.794 4-4 4s-4-1.794-4-4V4H6z"},null,-1)]))}const gn=z(pn,[["render",fn]]),hn={},vn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function bn(t,e){return h(),w("svg",vn,e[0]||(e[0]=[c("path",{d:"M20 11h-8c-4 0-4-1.816-4-2.5C8 7.882 8 6 12 6c2.8 0 2.99 1.678 3 2.014L16 8h1c0-1.384-1.045-4-5-4C6.584 4 6 7.147 6 8.5c0 .728.148 1.667.736 2.5H4v2h8 5.227H20V11zM12 18c-3.793 0-3.99-1.815-4-2H6c0 .04.069 4 6 4 5.221 0 6-2.819 6-4.5 0-.146-.009-.317-.028-.5h-2.006C15.998 15.2 16 15.376 16 15.5 16 16.184 16 18 12 18z"},null,-1)]))}const _n=z(hn,[["render",bn]]),yn={},kn={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function wn(t,e){return h(),w("svg",kn,e[0]||(e[0]=[c("path",{d:"M4 6h2v2H4zm0 5h2v2H4zm0 5h2v2H4zm16-8V6H8.023v2H18.8zM8 11h12v2H8zm0 5h12v2H8z"},null,-1)]))}const xn=z(yn,[["render",wn]]),An={},Cn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function $n(t,e){return h(),w("svg",Cn,e[0]||(e[0]=[c("path",{d:"M5.282 12.064c-.428.328-.72.609-.875.851-.155.24-.249.498-.279.768h2.679v-.748H5.413c.081-.081.152-.151.212-.201.062-.05.182-.142.361-.27.303-.218.511-.42.626-.604.116-.186.173-.375.173-.578 0-.189-.05-.363-.151-.512-.1-.153-.237-.268-.412-.341-.174-.076-.419-.111-.733-.111-.3 0-.537.038-.706.114-.172.078-.302.19-.396.338-.094.143-.159.346-.194.604l.894.076c.025-.188.074-.317.147-.394.072-.073.166-.108.279-.108.11 0 .2.035.272.108.073.071.108.156.108.258 0 .091-.037.19-.108.297C5.711 11.713 5.544 11.865 5.282 12.064zM5.337 18.45c-.114 0-.208-.036-.282-.105-.074-.07-.128-.195-.162-.378L4 18.085c.059.204.142.372.251.506.109.133.248.235.417.306C4.836 18.966 5.067 19 5.36 19c.3 0 .541-.047.725-.14.185-.096.325-.228.424-.403.098-.175.146-.354.146-.544 0-.152-.029-.282-.088-.393-.06-.107-.142-.195-.249-.261-.066-.042-.161-.078-.286-.11.155-.085.268-.183.345-.299.076-.115.113-.24.113-.383 0-.239-.093-.437-.281-.596-.187-.159-.49-.238-.909-.238-.365 0-.648.072-.847.219-.2.143-.334.353-.404.626l.844.151c.023-.162.067-.274.133-.338s.151-.098.257-.098c.103 0 .183.032.241.089.059.06.087.139.087.238 0 .104-.038.193-.117.27s-.177.112-.293.112c-.028 0-.066-.004-.116-.011L5.04 17.54c.123-.036.22-.056.289-.056.132 0 .237.041.313.126.077.082.115.199.115.352 0 .146-.04.266-.119.354C5.558 18.403 5.458 18.45 5.337 18.45zM6.285 8.367V5H5.546C5.451 5.208 5.319 5.383 5.152 5.523 4.984 5.665 4.748 5.785 4.444 5.888v.754C4.65 6.577 4.821 6.509 4.958 6.438c.137-.069.277-.162.423-.276v2.206H6.285zM9 6H20V8H9zM9 11H20V13H9zM9 16H20V18H9z"},null,-1)]))}const Mn=z(An,[["render",$n]]),Ln={},Tn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function Hn(t,e){return h(),w("svg",Tn,e[0]||(e[0]=[c("path",{d:"M3.691 6.292C5.094 4.771 7.217 4 10 4h1v2.819L10.196 6.98c-1.37.274-2.323.813-2.833 1.604C7.05 9.071 6.947 9.591 6.925 10H9h1c.553 0 1 .447 1 1v7c0 1.103-.897 2-2 2H3c-.553 0-1-.447-1-1v-5l.003-2.919C1.994 10.97 1.804 8.34 3.691 6.292zM20 20h-6c-.553 0-1-.447-1-1v-5l.003-2.919c-.009-.111-.199-2.741 1.688-4.789C16.094 4.771 18.217 4 21 4h1v2.819L21.196 6.98c-1.37.274-2.323.813-2.833 1.604C18.05 9.071 17.947 9.591 17.925 10H20h1c.553 0 1 .447 1 1v7C22 19.103 21.103 20 20 20z"},null,-1)]))}const Sn=z(Ln,[["render",Hn]]),zn={},In={viewBox:"0 0 20 20",class:"w-6 h-6 fill-current"};function Vn(t,e){return h(),w("svg",In,e[0]||(e[0]=[c("path",{d:"M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z"},null,-1),c("path",{d:"M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z"},null,-1),c("path",{d:"M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z"},null,-1)]))}const Bn=z(zn,[["render",Vn]]),En={},On={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function Rn(t,e){return h(),w("svg",On,e[0]||(e[0]=[c("path",{d:"M4 7h16v2H4zm0-4h16v2H4zm0 8h16v2H4zm0 4h16v2H4zm2 4h12v2H6z"},null,-1)]))}const Pn=z(En,[["render",Rn]]),Nn={},Dn={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function Fn(t,e){return h(),w("svg",Dn,e[0]||(e[0]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"},null,-1)]))}const Ze=z(Nn,[["render",Fn]]),qn={},Un={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function jn(t,e){return h(),w("svg",Un,e[0]||(e[0]=[c("path",{d:"M16.949 14.121 19.071 12a5.008 5.008 0 0 0 0-7.071 5.006 5.006 0 0 0-7.071 0l-.707.707 1.414 1.414.707-.707a3.007 3.007 0 0 1 4.243 0 3.005 3.005 0 0 1 0 4.243l-2.122 2.121a2.723 2.723 0 0 1-.844.57L13.414 12l1.414-1.414-.707-.707a4.965 4.965 0 0 0-3.535-1.465c-.235 0-.464.032-.691.066L3.707 2.293 2.293 3.707l18 18 1.414-1.414-5.536-5.536c.277-.184.538-.396.778-.636zm-6.363 3.536a3.007 3.007 0 0 1-4.243 0 3.005 3.005 0 0 1 0-4.243l1.476-1.475-1.414-1.414L4.929 12a5.008 5.008 0 0 0 0 7.071 4.983 4.983 0 0 0 3.535 1.462A4.982 4.982 0 0 0 12 19.071l.707-.707-1.414-1.414-.707.707z"},null,-1)]))}const Zn=z(qn,[["render",jn]]),Gn={class:"w-full flex"},Kn={for:"target"},Wn={value:"_self"},Jn={value:"_blank"},Xn={__name:"InsertLink",props:{editor:{required:!0}},emits:["insert"],setup(t,{emit:e}){const s=t,r=B(!1),i=B(""),n=B("_self"),d=()=>{r.value=!0;const{href:f,target:p}=s.editor.getAttributes("link");f&&(i.value=f),p&&(n.value=p)},m=()=>{r.value=!1,i.value="",n.value="_self"},g=()=>{s.editor.commands.setLink({href:i.value,target:n.value}),m()},o=()=>{s.editor.chain().focus().unsetLink().run(),m()};return(f,p)=>(h(),w(j,null,[c("button",{onClick:d,class:T([{"is-active":t.editor.isActive("link")},"flex"]),type:"button"},[a(Ze)],2),a(ce,{show:r.value,"max-width":"sm",closeable:!0,"scrollable-body":!0,onClose:m},{header:u(()=>[k(v(f.$t("general.insert"))+"/"+v(f.$t("editor.edit_link")),1)]),body:u(()=>[a(E,null,{title:u(()=>p[2]||(p[2]=[c("label",{for:"href"},"URL",-1)])),default:u(()=>[c("div",Gn,[a(te,{type:"text",modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=A=>i.value=A),id:"href",class:"mr-xs"},null,8,["modelValue"]),a(G,{onClick:o,size:"md",disabled:!t.editor.isActive("link")},{icon:u(()=>[a(Zn)]),_:1},8,["disabled"])])]),_:1}),a(E,{class:"mt-lg"},{title:u(()=>[c("label",Kn,v(f.$t("editor.open_link_in")),1)]),default:u(()=>[a(de,{modelValue:n.value,"onUpdate:modelValue":p[1]||(p[1]=A=>n.value=A),id:"target"},{default:u(()=>[c("option",Wn,v(f.$t("editor.current_window")),1),c("option",Jn,v(f.$t("editor.new_window")),1)]),_:1},8,["modelValue"])]),_:1})]),footer:u(()=>[a(G,{onClick:m,class:"mr-xs"},{default:u(()=>[k(v(f.$t("general.cancel")),1)]),_:1}),a(oe,{onClick:g},{default:u(()=>[k(v(f.$t("general.insert")),1)]),_:1})]),_:1},8,["show"])],64))}},Yn={},Qn={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current"};function eo(t,e){return h(),w("svg",Qn,e[0]||(e[0]=[c("path",{d:"M4 11h16v2H4z","fill-rule":"evenodd"},null,-1)]))}const to=z(Yn,[["render",eo]]),so=(t,e,s)=>{const r=t.replace().split(/(?:\r\n?|\n)/),i=[];r.forEach(d=>{const m={type:"paragraph"};d.length>0&&(m.content=[{type:"text",text:d}]);const g=It.fromJSON(e.doc.type.schema,m);i.push(g)});const n=ve.fromArray(i);return $e.maxOpen(n)},no={key:0,class:"editorClassicMenu text-stone-800 flex flex-wrap gap-xs border-b border-gray-200 pb-md mb-md"},oo={type:"button",class:"w-28 text-left h-full"},ro=["disabled"],io=["disabled"],lo=["disabled"],ao=["disabled"],uo={type:"button"},co={__name:"EditorClassic",props:{value:{required:!0},editable:{type:Boolean,default:!0},placeholder:{type:String,default:""}},emits:["update"],setup(t,{emit:e}){et();const s=t,r=e;B();const i=B(!1),n=Vt({editable:s.editable,content:s.value,extensions:[Ts,Hs,Ss.configure({types:["heading","paragraph"]}),sn,Bt.configure({openOnClick:!1})],editorProps:{attributes:{class:"focus:outline-none min-h-[150px]"},clipboardTextParser:so},onUpdate:()=>{r("update",n.value.getHTML())},onFocus:()=>{i.value=!0},onBlur:()=>{i.value=!1}});tt(()=>{n.value.destroy()}),Ie(()=>s.value,g=>{g!==n.value.getHTML()&&n.value.commands.setContent(g)});const d=F(()=>n.value.isActive("heading",{level:1})?"Heading 1":n.value.isActive("heading",{level:2})?"Heading 2":n.value.isActive("heading",{level:3})?"Heading 3":n.value.isActive("heading",{level:4})?"Heading 4":n.value.isActive("heading",{level:5})?"Heading 5":n.value.isActive("heading",{level:6})?"Heading 6":"Paragraph"),m=g=>{n.value.chain().focus().setImage({src:g}).run()};return(g,o)=>{const f=_e("tooltip");return h(),w("div",{class:T([{"border-primary-200 ring ring-primary-200 ring-opacity-50":i.value},"editorClassic border border-gray-200 rounded-lg p-md pb-xs text-base transition-colors ease-in-out duration-200"])},[l(n)?(h(),w("div",no,[a(Ve,{"width-classes":"w-40",placement:"bottom-start"},{trigger:u(()=>[c("button",oo,v(d.value),1)]),content:u(()=>[a(D,{onClick:o[0]||(o[0]=p=>l(n).chain().focus().setParagraph().run()),isActive:l(n).isActive("paragraph"),size:"xs",as:"button"},{default:u(()=>o[21]||(o[21]=[k(" Paragraph ")])),_:1},8,["isActive"]),a(D,{onClick:o[1]||(o[1]=p=>l(n).chain().focus().toggleHeading({level:1}).run()),isActive:l(n).isActive("heading",{level:1}),size:"xs",as:"button"},{default:u(()=>o[22]||(o[22]=[c("span",{class:"text-2xl"},"Heading 1",-1)])),_:1},8,["isActive"]),a(D,{onClick:o[2]||(o[2]=p=>l(n).chain().focus().toggleHeading({level:2}).run()),isActive:l(n).isActive("heading",{level:2}),size:"xs",as:"button"},{default:u(()=>o[23]||(o[23]=[c("span",{class:"text-xl"},"Heading 2",-1)])),_:1},8,["isActive"]),a(D,{onClick:o[3]||(o[3]=p=>l(n).chain().focus().toggleHeading({level:3}).run()),isActive:l(n).isActive("heading",{level:3}),size:"xs",as:"button"},{default:u(()=>o[24]||(o[24]=[c("span",{class:"text-lg"},"Heading 3",-1)])),_:1},8,["isActive"]),a(D,{onClick:o[4]||(o[4]=p=>l(n).chain().focus().toggleHeading({level:4}).run()),isActive:l(n).isActive("heading",{level:4}),size:"xs",as:"button"},{default:u(()=>o[25]||(o[25]=[c("span",{class:"text-md"},"Heading 4",-1)])),_:1},8,["isActive"]),a(D,{onClick:o[5]||(o[5]=p=>l(n).chain().focus().toggleHeading({level:5}).run()),isActive:l(n).isActive("heading",{level:5}),size:"xs",as:"button"},{default:u(()=>o[26]||(o[26]=[c("span",{class:"text-base"},"Heading 5",-1)])),_:1},8,["isActive"]),a(D,{onClick:o[6]||(o[6]=p=>l(n).chain().focus().toggleHeading({level:6}).run()),isActive:l(n).isActive("heading",{level:6}),size:"xs",as:"button"},{default:u(()=>o[27]||(o[27]=[c("span",{class:"text-sm"},"Heading 6",-1)])),_:1},8,["isActive"])]),_:1}),c("button",{onClick:o[7]||(o[7]=p=>l(n).chain().focus().toggleBold().run()),disabled:!l(n).can().chain().focus().toggleBold().run(),class:T({"is-active":l(n).isActive("bold")}),type:"button"},[a(ln)],10,ro),c("button",{onClick:o[8]||(o[8]=p=>l(n).chain().focus().toggleItalic().run()),disabled:!l(n).can().chain().focus().toggleItalic().run(),class:T({"is-active":l(n).isActive("italic")}),type:"button"},[a(cn)],10,io),c("button",{onClick:o[9]||(o[9]=p=>l(n).chain().focus().toggleUnderline().run()),disabled:!l(n).can().chain().focus().toggleItalic().run(),class:T({"is-active":l(n).isActive("underline")}),type:"button"},[a(gn)],10,lo),c("button",{onClick:o[10]||(o[10]=p=>l(n).chain().focus().toggleStrike().run()),disabled:!l(n).can().chain().focus().toggleStrike().run(),class:T([{"is-active":l(n).isActive("strike")},"mr-sm"]),type:"button"},[a(_n)],10,ao),c("button",{onClick:o[11]||(o[11]=p=>l(n).chain().focus().setTextAlign("left").run()),class:T({"is-active":l(n).isActive({textAlign:"left"})}),type:"button"},[a(je)],2),c("button",{onClick:o[12]||(o[12]=p=>l(n).chain().focus().setTextAlign("center").run()),class:T({"is-active":l(n).isActive({textAlign:"center"})}),type:"button"},[a(Ue)],2),c("button",{onClick:o[13]||(o[13]=p=>l(n).chain().focus().setTextAlign("right").run()),class:T({"is-active":l(n).isActive({textAlign:"right"})}),type:"button"},[a(qe)],2),c("button",{onClick:o[14]||(o[14]=p=>l(n).chain().focus().setTextAlign("justify").run()),class:T([{"is-active":l(n).isActive({textAlign:"justify"})},"mr-sm"]),type:"button"},[a(Pn)],2),c("button",{onClick:o[15]||(o[15]=p=>l(n).chain().focus().toggleBulletList().run()),class:T({"is-active":l(n).isActive("bulletList")}),type:"button"},[a(xn)],2),c("button",{onClick:o[16]||(o[16]=p=>l(n).chain().focus().toggleOrderedList().run()),class:T([{"is-active":l(n).isActive("orderedList")},"mr-sm"]),type:"button"},[a(Mn)],2),c("button",{onClick:o[17]||(o[17]=p=>l(n).chain().focus().toggleBlockquote().run()),class:T({"is-active":l(n).isActive("blockquote")}),type:"button"},[a(Sn)],2),q((h(),w("button",{onClick:o[18]||(o[18]=p=>l(n).chain().focus().setHardBreak().run()),type:"button"},[a(Bn)])),[[f,g.$t("editor.hard_break")]]),q((h(),w("button",{onClick:o[19]||(o[19]=p=>l(n).chain().focus().setHorizontalRule().run()),class:"mr-sm",type:"button"},[a(to)])),[[f,g.$t("editor.horizontal_line")]]),a(Rt,{onUpload:o[20]||(o[20]=p=>{if(p.is_local_driver){m(`/storage/${p.path}`);return}m(p.url)}),class:"flex"},{default:u(()=>[q((h(),w("button",uo,[a(st)])),[[f,g.$t("post.add_image")]])]),_:1}),a(Xn,{editor:l(n)},null,8,["editor"])])):Z("",!0),a(l(Et),{editor:l(n),class:"editor-classic-format max-h-96 overflow-y-auto p-xs"},null,8,["editor"])],2)}}},po={__name:"Editor",props:{content:{required:!0,type:Object}},setup(t){return(e,s)=>(h(),V(co,{value:t.content.body,onUpdate:s[0]||(s[0]=r=>t.content.body=r)},null,8,["value"]))}},mo={__name:"Html",props:{content:{required:!0,type:Object}},setup(t){return(e,s)=>(h(),V(E,null,{title:u(()=>s[1]||(s[1]=[c("label",{for:"m_html"},"HTML",-1)])),default:u(()=>[a(Re,{id:"m_html",modelValue:t.content.body,"onUpdate:modelValue":s[0]||(s[0]=r=>t.content.body=r),class:"min-h-[350px]"},null,8,["modelValue"])]),_:1}))}},Ge=()=>({modules:{Editor:{content:{body:""},component:po},Html:{content:{body:""},component:mo}}}),fo={class:"flex items-center mb-lg gap-lg"},go={class:"w-full md:w-1/2"},ho={for:"m_name"},vo={class:"w-full md:w-1/2"},bo={for:"m_status"},_o={value:1},yo={value:0},Ke={__name:"FormBlock",props:{form:{required:!0},moduleComponent:{required:!0}},setup(t){return(e,s)=>(h(),w(j,null,[c("div",fo,[c("div",go,[a(E,null,{title:u(()=>[c("label",ho,[k(v(e.$t("general.name"))+" ",1),a(ge,{danger:!0},{default:u(()=>s[2]||(s[2]=[k("*")])),_:1})])]),footer:u(()=>[a(U,{message:t.form.errors.name},null,8,["message"])]),default:u(()=>[a(te,{modelValue:t.form.name,"onUpdate:modelValue":s[0]||(s[0]=r=>t.form.name=r),type:"text",id:"m_name",class:"w-full",autofocus:!0,error:t.form.errors.name!==void 0,required:""},null,8,["modelValue","error"])]),_:1})]),c("div",vo,[a(E,null,{title:u(()=>[c("label",bo,v(e.$t("general.status")),1)]),footer:u(()=>[a(U,{message:t.form.errors.status},null,8,["message"])]),default:u(()=>[a(de,{modelValue:t.form.status,"onUpdate:modelValue":s[1]||(s[1]=r=>t.form.status=r),error:t.form.errors.status!==void 0,id:"m_status"},{default:u(()=>[c("option",_o,v(e.$t("general.enabled")),1),c("option",yo,v(e.$t("general.disabled")),1)]),_:1},8,["modelValue","error"])]),_:1})])]),(h(),V(nt(t.moduleComponent),{content:t.form.content},null,8,["content"]))],64))}},ko={class:"font-semibold capitalize"},wo={class:"mt-xs"},xo={__name:"EditBlock",props:{block:{required:!0,type:Object}},emits:["update","delete"],setup(t,{emit:e}){const{t:s}=ye(),r=J("routePrefix"),i=J("confirmation"),n=t,d=e,{notify:m}=we(),{modules:g}=Ge(),o=B(!1),f=Be(null),p=ke(re.cloneDeep(n.block)),A=()=>{const _=g[n.block.module];if(_===void 0){m("error",s("page.module_not_found"));return}f.value=_.component,o.value=!0},C=()=>{o.value=!1,p.reset()},I=()=>{if(!p.isDirty){C();return}i().title(s("page.are_you_sure")).description(s("page.unsaved_will_lost")).btnConfirmName(s("general.discard")).onConfirm(_=>{_.close(),C()}).show()},L=()=>{p.put(route(`${r}.blocks.update`,{block:n.block.id}),{preserveScroll:!0,preserveState:!0,only:["blocks"],onSuccess:_=>{const b=_.props.blocks.data.find(x=>x.id===n.block.id);b&&d("update",b),m("success",s("page.block_updated"))}})},y=()=>{i().title(s("page.delete_block")).description(s("page.confirm_delete_block")).destructive().onConfirm(_=>{_.isLoading(!0),Oe.delete(route(`${r}.blocks.delete`,{block:n.block.id}),{only:["blocks"],onSuccess(){m("success",s("page.block_deleted")),d("delete"),_.reset(),C()},onFinish(){_.isLoading(!1)}})}).show()};return(_,b)=>(h(),w(j,null,[a(ue,{onClick:A,class:"group-visible"},{icon:u(()=>[a(ot)]),_:1}),a(ce,{show:o.value,"max-width":"5xl","scrollable-body":!0,closeable:!0,onClose:I},{header:u(()=>[c("span",null,[k(v(l(s)("page.edit_block"))+"[",1),c("span",ko,v(l(p).module),1),b[0]||(b[0]=k("]"))])]),body:u(()=>[c("div",wo,[o.value?(h(),V(Ke,{key:0,form:l(p),moduleComponent:f.value},null,8,["form","moduleComponent"])):Z("",!0)])]),footer:u(()=>[a(G,{onClick:I,class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:u(()=>[k(v(l(s)("general.cancel")),1)]),_:1}),a(Ee,{onClick:y,class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:u(()=>[k(v(l(s)("general.delete")),1)]),_:1}),a(oe,{onClick:L,disabled:l(p).processing,isLoading:l(p).processing},{default:u(()=>[k(v(l(s)("general.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},Ao={class:"flex items-center justify-between"},Co={class:"w-full"},$o={class:"flex"},Mo={class:"flex"},Lo={class:"font-medium"},To={class:"font-medium text-gray-400"},Ho={class:"flex justify-end"},So={class:"flex mr-xs rtl:mr-0 rtl:ml-xs"},zo={__name:"PageAttachedBlocks",props:{modelValue:{required:!0,type:Array}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,r=e,i=(m,g,o)=>{const f=s.modelValue.map(p=>p.id===g?Object.assign(p,Object.assign(o,{random_key:p.random_key===m?m:Pe()})):p);r("update:modelValue",f)},n=m=>{const g=re.cloneDeep(s.modelValue).filter(o=>o.id!==m);r("update:modelValue",g)},d=m=>{r("update:modelValue",s.modelValue.filter((g,o)=>o!==m))};return(m,g)=>{const o=_e("tooltip");return t.modelValue.length?(h(),V(_t,{key:0},{default:u(()=>[a(l(vt),rt({list:t.modelValue},{animation:200,group:"blocks"},{handle:".handle","item-key":"random_key"}),{item:u(({element:f,index:p})=>[a(bt,{class:"group"},{default:u(()=>[c("div",Ao,[c("div",Co,[c("div",$o,[a(ue,{class:"handle mr-xs cursor-move"},{icon:u(()=>[a(Ft)]),_:1}),c("div",null,[c("div",Mo,[c("div",Lo,v(f.name),1)]),c("div",To,v(f.module),1)])])]),c("div",Ho,[f.status?Z("",!0):(h(),V(it,{key:0,variant:"error",class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:u(()=>[k(v(m.$t("general.disabled")),1)]),_:1})),c("div",So,[a(xo,{block:f,onDelete:A=>n(f.id),onUpdate:A=>i(f.random_key,f.id,A)},null,8,["block","onDelete","onUpdate"])]),q((h(),V(ue,{onClick:A=>d(p),destructive:!0,class:"group-visible"},{icon:u(()=>[a(xe)]),_:2},1032,["onClick"])),[[o,m.$t("page.remove_from_page")]])])])]),_:2},1024)]),_:1},16,["list"])]),_:1})):(h(),V(Ne,{key:1},{default:u(()=>[k(v(m.$t("page.page_no_blocks_added")),1)]),_:1}))}}},Io={class:"relative"},Vo={__name:"AddExistingBlock",props:{modelValue:{required:!0,type:Array},blocks:{required:!0,type:Object,default:[]}},emits:["update:modelValue"],setup(t,{emit:e}){const s=B(!1),r=B(null),i=t,n=e,d=F(()=>i.blocks.data.map(p=>({key:p.id,label:p.name}))),m=()=>{const p=i.blocks.data.find(A=>A.id===r.value.key);return p?re.cloneDeep(p):null},g=()=>{const p=m();p&&(n("update:modelValue",[...i.modelValue,Object.assign(p,{random_key:Pe()})]),f())},o=()=>{s.value=!0},f=()=>{s.value=!1,r.value=null};return(p,A)=>{const C=lt("v-select");return h(),w(j,null,[a(G,{onClick:o,size:"sm",class:"mr-xs"},{icon:u(()=>[a(Ze)]),default:u(()=>[k(" "+v(p.$t("page.add_existing_block")),1)]),_:1}),a(ce,{show:s.value,"max-width":"sm","scrollable-body":!0,closeable:!0,onClose:f},{header:u(()=>[k(v(p.$t("page.add_existing_block")),1)]),body:u(()=>[c("div",Io,[d.value.length?(h(),w(j,{key:0},[s.value?(h(),V(C,{key:0,modelValue:r.value,"onUpdate:modelValue":A[0]||(A[0]=I=>r.value=I),options:d.value,filterable:!1,clearable:!1,"close-on-select":!0,placeholder:p.$t("page.search_blocks"),"append-to-body":""},{"no-options":u(({search:I,searching:L,loading:y})=>[k(v(p.$t("general.list_empty")),1)]),_:1},8,["modelValue","options","placeholder"])):Z("",!0)],64)):(h(),V(Ne,{key:1},{default:u(()=>[k(v(p.$t("page.no_blocks_created")),1)]),_:1}))])]),footer:u(()=>[a(G,{onClick:f,class:"mr-xs"},{default:u(()=>[k(v(p.$t("general.cancel")),1)]),_:1}),d.value.length?(h(),V(oe,{key:0,onClick:g,disabled:!r.value},{default:u(()=>[k(v(p.$t("page.add_to_page")),1)]),_:1},8,["disabled"])):Z("",!0)]),_:1},8,["show"])],64)}}},Bo={class:"font-semibold capitalize"},Eo={class:"mt-xs"},Oo={__name:"CreateBlock",emits:["add"],setup(t,{emit:e}){const{t:s}=ye(),r=J("routePrefix"),i=J("confirmation"),n=e,{notify:d}=we(),{modules:m}=Ge(),g=B(!1),o=Be(null),f=ke({name:"",module:null,content:{},status:1}),p=L=>{const y=m[L];if(y===void 0){d("error",s("page.module_not_found"));return}o.value=y.component,f.content=re.cloneDeep(y.content),f.module=L,g.value=!0},A=()=>{g.value=!1,f.reset()},C=()=>{if(!f.isDirty){A();return}i().title(s("page.are_you_sure")).description(s("page.unsaved_will_lost")).btnConfirmName(s("general.discard")).onConfirm(L=>{L.close(),A()}).show()},I=()=>{f.post(route(`${r}.blocks.store`),{preserveScroll:!0,preserveState:!0,only:["blocks"],onSuccess:L=>{n("add",L.props.blocks.data[0]),A(),d("success",s("page.block_created")+`
`+s("page.save_page"))}})};return(L,y)=>(h(),w(j,null,[a(Ve,{placement:"bottom"},{trigger:u(()=>[a(G,{size:"sm",class:"mr-xs"},{icon:u(()=>[a(at)]),default:u(()=>[k(" "+v(l(s)("page.create_block")),1)]),_:1})]),content:u(()=>[a(D,{as:"button",onClick:y[0]||(y[0]=_=>p("Editor"))},{default:u(()=>y[2]||(y[2]=[k(" Editor ")])),_:1}),a(D,{as:"button",onClick:y[1]||(y[1]=_=>p("Html"))},{default:u(()=>y[3]||(y[3]=[k(" Html ")])),_:1})]),_:1}),a(ce,{show:g.value,"max-width":"5xl","scrollable-body":!0,closeable:!0,onClose:C},{header:u(()=>[c("span",null,[k(v(l(s)("page.create_block"))+" [",1),c("span",Bo,v(l(f).module),1),y[4]||(y[4]=k("]"))])]),body:u(()=>[c("div",Eo,[g.value?(h(),V(Ke,{key:0,form:l(f),moduleComponent:o.value},null,8,["form","moduleComponent"])):Z("",!0)])]),footer:u(()=>[a(G,{onClick:C,class:"mr-xs"},{default:u(()=>[k(v(l(s)("general.cancel")),1)]),_:1}),a(oe,{onClick:I,disabled:l(f).processing,isLoading:l(f).processing},{default:u(()=>[k(v(l(s)("page.create_add_to_page")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},Ro={class:"flex items-center mt-lg"},Po={__name:"PageBlocks",props:{page:{required:!0,type:Object}},setup(t){const e=t,s=r=>{e.page.blocks.push(r)};return(r,i)=>(h(),w("div",null,[a(zo,{modelValue:t.page.blocks,"onUpdate:modelValue":i[0]||(i[0]=n=>t.page.blocks=n)},null,8,["modelValue"]),c("div",Ro,[a(Vo,{modelValue:t.page.blocks,"onUpdate:modelValue":i[1]||(i[1]=n=>t.page.blocks=n),blocks:r.$page.props.blocks},null,8,["modelValue","blocks"]),a(Oo,{onAdd:s})])]))}},No={class:"row-py w-full mx-auto"},Do={key:0,class:"flex"},Fo=["href"],qo={class:"row-px"},Uo={class:"flex gap-lg"},jo={class:"w-2/3"},Zo={for:"name"},Go={for:"meta_title"},Ko={for:"meta_description"},Wo={class:"w-1/3"},Jo={for:"slug"},Xo=["innerHTML"],Yo={for:"layout"},Qo={value:"default"},er={value:"medium"},tr={value:"small"},sr={for:"status"},nr={value:1},or={value:0},rr={class:"flex items-center mt-lg"},ir=dt({layout:pt}),Lr=Object.assign(ir,{__name:"CreateEdit",props:{mode:{required:!0,type:String,default:"create"},page:{type:[Object,null]}},setup(t){const{t:e}=ye(),s=t,{notify:r}=we(),i=J("routePrefix"),n=J("confirmation"),d=F(()=>m.value?e("page.create_page"):e("page.edit_page")),{isCreate:m,isEdit:g}=mt(),o=ke(g.value?re.cloneDeep(s.page):{name:"",meta_title:"",meta_description:"",slug:"",layout:"default",status:1,blocks:[]}),f=()=>{Ie(()=>s.page.blocks,y=>{o.blocks=y})};g.value&&f();const p=()=>{o.slug=s.page.slug},A=y=>{y.post(route(`${i}.pages.store`),{onSuccess:()=>{p(),r("success",e("page.page_created"))}})},C=y=>{y.put(route(`${i}.pages.update`,{page:s.page.uuid}),{preserveScroll:!0,onSuccess:()=>{p(),r("success",e("page.page_updated"))}})},I=()=>{n().title(e("page.delete_page")).description(e("page.confirm_delete_page")).destructive().onConfirm(y=>{y.isLoading(!0),Oe.delete(route(`${i}.pages.delete`,{page:s.page.uuid}),{preserveScroll:!0,onSuccess(){r("success",e("page.page_deleted"))},onFinish(){y.reset()}})}).show()},L=()=>{const y=o.transform(_=>({..._,blocks:_.blocks.map(b=>b.id)}));m.value&&A(y),g.value&&C(y)};return(y,_)=>(h(),w(j,null,[a(l(ct),{title:d.value},null,8,["title"]),c("div",No,[a(ft,{title:d.value},{description:u(()=>[k(v(l(e)("page.page_desc")),1)]),default:u(()=>[l(g)?(h(),w("div",Do,[c("a",{href:y.route(`${l(i)}.pages.show`,{slug:t.page.url_path}),target:"_blank",class:"mr-xs rtl:mr-0 rtl:ml-xs"},[a(G,{size:"sm"},{icon:u(()=>[a(gt)]),default:u(()=>[k(" "+v(l(e)("general.open")),1)]),_:1})],8,Fo),a(Ee,{onClick:I,size:"sm"},{icon:u(()=>[a(xe)]),_:1})])):Z("",!0)]),_:1},8,["title"]),c("div",qo,[c("form",{method:"post",onSubmit:ut(L,["prevent"])},[c("div",Uo,[c("div",jo,[a(me,null,{title:u(()=>[k(v(l(e)("general.details")),1)]),default:u(()=>[a(E,null,{title:u(()=>[c("label",Zo,[k(v(l(e)("general.name"))+" ",1),a(ge,{danger:!0},{default:u(()=>_[6]||(_[6]=[k("*")])),_:1})])]),footer:u(()=>[a(U,{message:l(o).errors.name},null,8,["message"])]),default:u(()=>[a(te,{modelValue:l(o).name,"onUpdate:modelValue":_[0]||(_[0]=b=>l(o).name=b),error:l(o).errors.name!==void 0,type:"text",id:"name",class:"w-full",autofocus:l(m),required:""},null,8,["modelValue","error","autofocus"])]),_:1}),a(E,{class:"mt-lg"},{title:u(()=>[c("label",Go,v(l(e)("page.meta_title")),1)]),footer:u(()=>[a(U,{message:l(o).errors.meta_title},null,8,["message"])]),default:u(()=>[a(te,{modelValue:l(o).meta_title,"onUpdate:modelValue":_[1]||(_[1]=b=>l(o).meta_title=b),error:l(o).errors.meta_title!==void 0,type:"text",id:"meta_title",class:"w-full"},null,8,["modelValue","error"])]),_:1}),a(E,{class:"mt-lg"},{title:u(()=>[c("label",Ko,v(l(e)("page.meta_description")),1)]),footer:u(()=>[a(U,{message:l(o).errors.meta_description},null,8,["message"])]),default:u(()=>[a(Re,{modelValue:l(o).meta_description,"onUpdate:modelValue":_[2]||(_[2]=b=>l(o).meta_description=b),error:l(o).errors.meta_description!==void 0,id:"meta_description",class:"w-full"},null,8,["modelValue","error"])]),_:1})]),_:1}),a(me,{class:"mt-lg"},{title:u(()=>[k(v(l(e)("general.blocks")),1)]),default:u(()=>[a(Po,{page:l(o)},null,8,["page"])]),_:1})]),c("div",Wo,[a(me,null,{default:u(()=>[a(E,null,{title:u(()=>[c("label",Jo,[k(v(l(e)("page.url_path"))+" ",1),a(ge,{danger:!0},{default:u(()=>_[7]||(_[7]=[k("*")])),_:1}),c("span",{innerHTML:l(e)("page.type_home"),class:"text-sm text-gray-400 inline-block ml-xs font-normal"},null,8,Xo)])]),footer:u(()=>[a(U,{message:l(o).errors.slug},null,8,["message"])]),default:u(()=>[a(te,{modelValue:l(o).slug,"onUpdate:modelValue":_[3]||(_[3]=b=>l(o).slug=b),error:l(o).errors.slug!==void 0,type:"text",id:"slug",class:"w-full",autocomplete:"off",required:""},null,8,["modelValue","error"])]),_:1}),a(E,{class:"mt-lg"},{title:u(()=>[c("label",Yo,v(l(e)("page.container_width")),1)]),footer:u(()=>[a(U,{message:l(o).errors.layout},null,8,["message"])]),default:u(()=>[a(de,{modelValue:l(o).layout,"onUpdate:modelValue":_[4]||(_[4]=b=>l(o).layout=b),error:l(o).errors.layout!==void 0,id:"layout"},{default:u(()=>[c("option",Qo,v(l(e)("general.default")),1),c("option",er,v(l(e)("page.medium")),1),c("option",tr,v(l(e)("page.small")),1)]),_:1},8,["modelValue","error"])]),_:1}),a(E,{class:"mt-lg"},{title:u(()=>[c("label",sr,v(l(e)("general.status")),1)]),footer:u(()=>[a(U,{message:l(o).errors.status},null,8,["message"])]),default:u(()=>[a(de,{modelValue:l(o).status,"onUpdate:modelValue":_[5]||(_[5]=b=>l(o).status=b),error:l(o).errors.status!==void 0,id:"status"},{default:u(()=>[c("option",nr,v(l(e)("general.enabled")),1),c("option",or,v(l(e)("general.disabled")),1)]),_:1},8,["modelValue","error"])]),_:1}),c("div",rr,[a(oe,{type:"submit",disabled:l(o).processing,isLoading:l(o).processing},{default:u(()=>[k(v(l(m)?l(e)("general.create"):l(e)("general.update")),1)]),_:1},8,["disabled","isLoading"])])]),_:1})])])],32)])])],64))}});export{Lr as default};
