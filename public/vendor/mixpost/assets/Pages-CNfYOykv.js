import{u as T,i as S,C as M,q as z,o as m,c as C,e as p,v as E,b as a,g as v,w as e,a as t,U as q,a0 as X,f as o,t as r,V as Y,a1 as G,a5 as O,n as j,z as ee,a3 as L,a6 as te,T as ae,a7 as N,y as w,s as A,j as K,N as D,O as se,F as U,L as le,R as oe,S as re,d as ne,Z as ie,h as ue,k as de,a8 as B,r as ce}from"./app-BxavtTYs.js";import{_ as me}from"./Admin-CpLrPT1Z.js";import{u as _e}from"./useSelectable-BJ_lcm9V.js";import{_ as fe}from"./PageHeader-BnI1hV_t.js";import{_ as pe}from"./PureDangerButton-zhKtSmpI.js";import{_ as ge}from"./Panel-Lw-nuda0.js";import{_ as R}from"./Checkbox-CKdbYkOi.js";import{_ as c,a as Z,T as he}from"./TableCell-C46VQBCN.js";import{_ as $e}from"./SelectableBar-CA2MAe5u.js";import{_ as be}from"./NoResult-DNS5zprA.js";import{T as H}from"./Trash-B9tkDRbU.js";import{_ as ve}from"./DropdownButton-DyMVBGMY.js";import{_ as ye}from"./PureButtonLink-hEv16skr.js";import{A as ke}from"./ArrowTopRightOnSquare-IL6rJNOT.js";import{_ as P}from"./VerticalGroup-DHZRXNYR.js";import{_ as I}from"./LabelSuffix-CL1UEugD.js";import{_ as F}from"./SuccessButton-DIpt_Jo-.js";import{_ as xe}from"./UploadButton-KFad3GKx.js";import{_ as we}from"./Flex-0eM5h-qJ.js";import"./QueueList-CJbQdoC3.js";import"./EllipsisVertical-DCDthPML.js";const Pe={class:"flex flex-row items-center justify-end gap-xs"},Se={__name:"PageItemAction",props:{itemId:{type:String,required:!0},urlPath:{type:String,required:!0}},emits:["onDelete"],setup(i,{emit:s}){const{t:d}=T(),_=S("routePrefix"),y=S("confirmation"),h=i,x=s,{notify:g}=j(),l=M(!1),b=()=>{y().title(d("page.delete_pages")).description(d("page.confirm_delete_pages")).destructive().onConfirm(f=>{f.isLoading(!0),G.delete(route(`${_}.pages.delete`,{page:h.itemId}),{onSuccess(){l.value=!1,g("success",d("page.page_deleted")),x("onDelete"),O.emit("pageDelete",h.itemId),f.reset()},onFinish(){f.close()}})}).show()};return(f,n)=>{const u=z("tooltip");return m(),C("div",null,[p("div",Pe,[E((m(),v(ye,{href:f.route(`${a(_)}.pages.show`,{slug:i.urlPath}),native:!0,target:"_blank"},{default:e(()=>[t(ke)]),_:1},8,["href"])),[[u,a(d)("general.open")]]),t(Y,{placement:"bottom-end"},{trigger:e(()=>[t(ve)]),content:e(()=>[t(q,{href:f.route(`${a(_)}.pages.edit`,{page:i.itemId})},{icon:e(()=>[t(X)]),default:e(()=>[o(" "+r(a(d)("general.edit")),1)]),_:1},8,["href"]),t(q,{onClick:b,as:"button"},{icon:e(()=>[t(H,{class:"text-red-500"})]),default:e(()=>[o(" "+r(a(d)("general.delete")),1)]),_:1})]),_:1})])])}}},Ce={__name:"PageItem",props:{item:{type:Object,required:!0}},setup(i){return(s,d)=>(m(),v(Z,{hoverable:!0},{default:e(()=>[t(c,{class:"w-10"},{default:e(()=>[ee(s.$slots,"checkbox")]),_:3}),t(c,null,{default:e(()=>[o(r(i.item.name),1)]),_:1}),t(c,null,{default:e(()=>[o(r(i.item.slug),1)]),_:1}),t(c,null,{default:e(()=>[i.item.status?(m(),v(L,{key:0,variant:"success"},{default:e(()=>[o(r(s.$t("general.enabled")),1)]),_:1})):(m(),v(L,{key:1,variant:"error"},{default:e(()=>[o(r(s.$t("general.disabled")),1)]),_:1}))]),_:1}),t(c,null,{default:e(()=>[o(r(i.item.created_at),1)]),_:1}),t(c,null,{default:e(()=>[t(Se,{itemId:i.item.uuid,urlPath:i.item.url_path},null,8,["itemId","urlPath"])]),_:1})]),_:3}))}},Ve={for:"brand_name"},De=["src"],Ie={for:"brand_name"},Oe={for:"email"},Ue={for:"register_url"},Re={class:"ml-xs"},Te={__name:"GeneratePageSamples",setup(i){const{t:s}=T(),d=S("routePrefix"),_=M(!1),y=()=>{_.value=!0},h=()=>{_.value=!1},{user:x}=te(),{notify:g}=j(),l=ae({logo_url:N().props.mixpost.theme.logo,brand_name:N().props.app.name,email:x.value.email,register_url:"",destroy:!1}),b=()=>{l.post(route(`${d}.pages.generateSamples`),{preserveScroll:!0,onSuccess(){g("success",s("page.sample_pages_generated")),h(),l.reset()}})};return(f,n)=>(m(),C(U,null,[t(F,{onClick:y},{default:e(()=>[o(r(a(s)("page.generate_samples")),1)]),_:1}),t(se,{show:_.value,"max-width":"sm",closeable:!0,"scrollable-body":!0,onClose:h},{header:e(()=>[o(r(a(s)("page.generate_page_samples")),1)]),body:e(()=>[t(P,null,{title:e(()=>[p("label",Ve,[o(r(a(s)("page.brand_logo"))+" ",1),t(I,{danger:!0},{default:e(()=>n[5]||(n[5]=[o("*")])),_:1})])]),footer:e(()=>[t(w,{message:a(l).errors.logo_url},null,8,["message"])]),default:e(()=>[p("div",null,[t(xe,{withPreload:!0,onUpload:n[0]||(n[0]=u=>{if(u.is_local_driver){a(l).logo_url=`/storage/${u.path}`;return}a(l).logo_url=u.url})},{default:e(()=>[t(A,null,{default:e(()=>[o(r(a(s)("general.upload")),1)]),_:1})]),_:1}),a(l).logo_url?(m(),C("img",{key:0,src:a(l).logo_url,class:"w-auto max-h-20 mt-xs",alt:"Logo"},null,8,De)):K("",!0)])]),_:1}),t(P,{class:"mt-lg"},{title:e(()=>[p("label",Ie,[o(r(a(s)("page.brand_name"))+" ",1),t(I,{danger:!0},{default:e(()=>n[6]||(n[6]=[o("*")])),_:1})])]),footer:e(()=>[t(w,{message:a(l).errors.brand_name},null,8,["message"])]),default:e(()=>[t(D,{type:"text",modelValue:a(l).brand_name,"onUpdate:modelValue":n[1]||(n[1]=u=>a(l).brand_name=u),error:a(l).errors.brand_name,id:"brand_name"},null,8,["modelValue","error"])]),_:1}),t(P,{class:"mt-lg"},{title:e(()=>[p("label",Oe,[o(r(a(s)("page.contact_email"))+" ",1),t(I,{danger:!0},{default:e(()=>n[7]||(n[7]=[o("*")])),_:1})])]),footer:e(()=>[t(w,{message:a(l).errors.email},null,8,["message"])]),default:e(()=>[t(D,{type:"text",modelValue:a(l).email,"onUpdate:modelValue":n[2]||(n[2]=u=>a(l).email=u),error:a(l).errors.email,id:"email"},null,8,["modelValue","error"])]),_:1}),t(P,{class:"mt-lg"},{title:e(()=>[p("label",Ue,r(a(s)("page.register_url")),1)]),footer:e(()=>[t(w,{message:a(l).errors.register_url},null,8,["message"])]),default:e(()=>[t(D,{type:"text",modelValue:a(l).register_url,"onUpdate:modelValue":n[3]||(n[3]=u=>a(l).register_url=u),error:a(l).errors.register_url,id:"register_url"},null,8,["modelValue","error"])]),_:1}),t(P,{class:"mt-lg"},{footer:e(()=>[t(w,{message:a(l).errors.destroy},null,8,["message"])]),default:e(()=>[p("label",null,[t(R,{checked:a(l).destroy,"onUpdate:checked":n[4]||(n[4]=u=>a(l).destroy=u),value:!1},null,8,["checked"]),p("span",Re,r(a(s)("page.destroy_existing_pages")),1)])]),_:1})]),footer:e(()=>[t(A,{onClick:h,class:"mr-xs"},{default:e(()=>[o(r(a(s)("general.cancel")),1)]),_:1}),t(F,{onClick:b,disabled:a(l).processing,isLoading:a(l).processing},{default:e(()=>[o(r(a(s)("page.generate")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},je={class:"w-full mx-auto row-py"},qe={class:"mt-lg row-px w-full"},Le=ne({layout:me}),ot=Object.assign(Le,{__name:"Pages",props:{pages:{type:Object}},setup(i){const{t:s}=T(),d=S("routePrefix"),_=i,y=s("page.pages"),{notify:h}=j(),x=S("confirmation"),{selectedRecords:g,putPageRecords:l,toggleSelectRecordsOnPage:b,deselectRecord:f,deselectAllRecords:n}=_e(),u=()=>_.pages.data.map($=>$.uuid);le(()=>{l(u()),O.on("pageDelete",$=>{f($)})}),oe(()=>{O.off("pageDelete")}),re(()=>_.pages.data,()=>{l(u())});const J=()=>{x().title(s("page.delete_pages")).description(s("page.confirm_delete_pages")).destructive().onConfirm($=>{$.isLoading(!0),G.delete(route(`${d}.pages.deleteMultiple`),{data:{pages:g.value},preserveScroll:!0,onSuccess(){n(),h("success",s("page.pages_deleted"))},onFinish(){$.reset()}})}).show()};return($,V)=>{const Q=z("tooltip");return m(),C(U,null,[t(a(ie),{title:a(y)},null,8,["title"]),p("div",je,[t(fe,{title:a(y)},{description:e(()=>[o(r(a(s)("page.page_desc")),1)]),default:e(()=>[t(Te)]),_:1},8,["title"]),p("div",qe,[t($e,{count:a(g).length,onClose:a(n)},{default:e(()=>[E((m(),v(pe,{onClick:J},{default:e(()=>[t(H)]),_:1})),[[Q,a(s)("general.delete")]])]),_:1},8,["count","onClose"]),t(we,null,{default:e(()=>[t(a(ue),{href:$.route(`${a(d)}.pages.create`),class:"mb-xs sm:mb-0"},{default:e(()=>[t(de,null,{default:e(()=>[o(r(a(s)("page.create_page")),1)]),_:1})]),_:1},8,["href"])]),_:1}),t(ge,{"with-padding":!1,class:"mt-lg"},{default:e(()=>[t(he,null,{head:e(()=>[t(Z,null,{default:e(()=>[t(c,{component:"th",scope:"col",class:"w-10"},{default:e(()=>[t(R,{checked:a(b),"onUpdate:checked":V[0]||(V[0]=k=>B(b)?b.value=k:null),disabled:!i.pages.data.length},null,8,["checked","disabled"])]),_:1}),t(c,{component:"th",scope:"col"},{default:e(()=>[o(r(a(s)("general.name")),1)]),_:1}),t(c,{component:"th",scope:"col"},{default:e(()=>[o(r(a(s)("page.url_path")),1)]),_:1}),t(c,{component:"th",scope:"col"},{default:e(()=>[o(r(a(s)("general.status")),1)]),_:1}),t(c,{component:"th",scope:"col"},{default:e(()=>[o(r(a(s)("general.created_at")),1)]),_:1}),t(c,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(m(!0),C(U,null,ce(i.pages.data,k=>(m(),v(Ce,{key:k.uuid,item:k,onOnDelete:()=>{a(f)(k.uuid)}},{checkbox:e(()=>[t(R,{checked:a(g),"onUpdate:checked":V[1]||(V[1]=W=>B(g)?g.value=W:null),value:k.uuid},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),i.pages.data.length?K("",!0):(m(),v(be,{key:0,class:"p-md"},{default:e(()=>[o(r(a(s)("page.no_pages_found")),1)]),_:1}))]),_:1})])])],64)}}});export{ot as default};
