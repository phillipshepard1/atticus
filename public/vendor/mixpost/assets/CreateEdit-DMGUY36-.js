const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AIAssist-CY27Nbmn.js","assets/VariableManager-BQdX0e1Z.js","assets/index-CSZup35c.js","assets/app-BxavtTYs.js","assets/app-DqTL6qmA.css","assets/Variable-IDS6Z41M.js","assets/index-Dm9xgFsu.js","assets/vue.runtime.esm-bundler-DpHW48Ps.js","assets/MediaGifs-CmzkqV-8.js","assets/index.browser-DP16PUbO.js","assets/Masonry-BYenGJi_.js","assets/MediaFile-BY_fCad3.js","assets/ExclamationCircle-DvHPQVk8.js","assets/SectionTitle-CXQlRiUw.js","assets/SearchInput-CkdofEcO.js","assets/NoResult-DNS5zprA.js","assets/Alert-BlT5orGN.js","assets/Tab-Cd_KlTQp.js","assets/EllipsisVertical-DCDthPML.js","assets/Trash-B9tkDRbU.js","assets/ListItem-Ch3jcTq1.js","assets/Textarea-BQg5Wyvs.js","assets/VerticalGroup-DHZRXNYR.js","assets/Flex-0eM5h-qJ.js","assets/useAPIForm-C4g3lxb7.js","assets/Select-B7cBiASc.js","assets/Refresh-Dpahu98l.js","assets/ClipboardButton-zAZn9sLi.js","assets/Clipboard-D9JxKoAX.js"])))=>i.map(i=>d[i]);
import{u as z,l as G,aM as Z,i as H,C as J,T as K,G as Q,c as T,a,b as e,e as f,w as o,m as W,F as N,o as n,Z as X,g as _,f as m,t as c,k as C,j as w,s as Y,h,x as ee,N as te,r as ae,D as se,aa as k,a1 as j,E as oe,n as re}from"./app-BxavtTYs.js";import{u as le}from"./usePostVersions-THbIEc6s.js";import{u as ie}from"./Variable-IDS6Z41M.js";import{u as ne}from"./useTemplate-xQXKVZJw.js";import{_ as me}from"./PageHeader-BnI1hV_t.js";import{_ as de}from"./Panel-Lw-nuda0.js";import{_ as pe}from"./LabelSuffix-CL1UEugD.js";import{_ as ue}from"./VerticalGroup-DHZRXNYR.js";import{a as fe,b as _e,c as ce,d as xe,e as ve,_ as we}from"./VariableManager-BQdX0e1Z.js";import{T as ye}from"./Trash-B9tkDRbU.js";import{_ as E}from"./Flex-0eM5h-qJ.js";import"./index-CSZup35c.js";import"./index-Dm9xgFsu.js";import"./vue.runtime.esm-bundler-DpHW48Ps.js";import"./MediaGifs-CmzkqV-8.js";import"./index.browser-DP16PUbO.js";import"./Masonry-BYenGJi_.js";import"./MediaFile-BY_fCad3.js";import"./ExclamationCircle-DvHPQVk8.js";import"./SectionTitle-CXQlRiUw.js";import"./SearchInput-CkdofEcO.js";import"./NoResult-DNS5zprA.js";import"./Alert-BlT5orGN.js";import"./Tab-Cd_KlTQp.js";import"./EllipsisVertical-DCDthPML.js";import"./ListItem-Ch3jcTq1.js";import"./Textarea-BQg5Wyvs.js";const be={class:"w-full mx-auto row-py"},ke={class:"flex"},ge={class:"mt-lg row-px w-full"},Ce={for:"template_name"},Ee={class:"form-field"},he={__name:"CreateEdit",props:["template"],setup(A){const D=se(()=>oe(()=>import("./AIAssist-CY27Nbmn.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28]))),{t:l}=z(),d=A,i=d.template?G.cloneDeep(d.template):null;Z("postCtx",{});const x=H("workspaceCtx"),{notify:g}=re(),{versionContentObject:P}=le(),{insertEmoji:U,insertContent:y,replaceContent:B,updateContent:Ie,focusEditor:S}=ie(),{createPost:F,formatTemplateContent:L,deleteTemplate:O}=ne(),p=J(!1),v=K({name:i?i.name:"",content:i?i.content:[P()]}),I=Q(()=>d.template?l("template.edit_template"):l("template.create_new_template")),b=()=>({name:v.name,content:L(v.content)}),M=()=>{d.template||$(b()),d.template&&R(b())},$=(u,t=!1)=>{k.start(),p.value=!0,axios.post(route("mixpost.templates.api.store",{workspace:x.id}),u).then(r=>{if(g("success",l("template.template_created")),!t){j.get(route("mixpost.templates.edit",{workspace:x.id,template:r.data.id}),{},{preserveScroll:!0});return}j.get(route("mixpost.templates.create",{workspace:x.id}))}).finally(()=>{k.done(),p.value=!1})},R=u=>{k.start(),p.value=!0,axios.put(route("mixpost.templates.api.update",{workspace:x.id,template:d.template.id}),u).then(()=>{g("success",l("template.template_updated"))}).catch(t=>{g("error",t)}).finally(()=>{k.done(),p.value=!1})};return(u,t)=>(n(),T(N,null,[a(e(X),{title:I.value},null,8,["title"]),f("div",be,[a(me,{title:I.value},{default:o(()=>[f("div",ke,[e(i)?(n(),_(C,{key:0,onClick:t[0]||(t[0]=()=>{e(F)(b().content)}),class:"mr-xs"},{default:o(()=>[m(c(e(l)("template.use_template")),1)]),_:1})):w("",!0),e(i)?(n(),_(e(h),{key:1,href:u.route("mixpost.templates.create",{workspace:e(x).id})},{default:o(()=>[a(Y,{class:"mr-xs"},{default:o(()=>[m(c(e(l)("template.create_new")),1)]),_:1})]),_:1},8,["href"])):w("",!0),e(i)?(n(),_(ee,{key:2,onClick:t[1]||(t[1]=()=>{e(O)(e(i))}),size:"sm"},{default:o(()=>[a(ye)]),_:1})):w("",!0)])]),_:1},8,["title"]),f("div",ge,[f("form",{onSubmit:W(M,["prevent"])},[a(de,null,{title:o(()=>[m(c(e(l)("general.details")),1)]),default:o(()=>[a(ue,{class:"mb-lg !max-w-full"},{title:o(()=>[f("label",Ce,[m(c(e(l)("template.template_name"))+" ",1),a(pe,{danger:!0},{default:o(()=>t[10]||(t[10]=[m("*")])),_:1})])]),default:o(()=>[a(te,{type:"text",modelValue:e(v).name,"onUpdate:modelValue":t[2]||(t[2]=r=>e(v).name=r),id:"template_name",required:""},null,8,["modelValue"])]),_:1}),f("div",Ee,[(n(!0),T(N,null,ae(e(v).content,(r,q)=>(n(),_(we,{key:q,id:"templateEditor",value:r.body,editable:!0,onUpdate:V=>r.body=V},{default:o(V=>[a(fe,{media:r.media,onUpdated:s=>r.media=s},null,8,["media","onUpdated"]),a(E,{responsive:!1,class:"relative justify-between border-t border-gray-200 pt-md mt-md"},{default:o(()=>[a(E,{responsive:!1},{default:o(()=>[a(_e,{onSelected:t[3]||(t[3]=s=>e(U)({editorId:"templateEditor",emoji:s})),onClose:t[4]||(t[4]=s=>e(S)({editorId:"templateEditor"}))}),a(ce,{onInsert:s=>{r.media=[...r.media,...s.items],s.crediting&&e(y)({editorId:"templateEditor",text:s.crediting})}},null,8,["onInsert"]),a(xe,{editAllowed:!0,onInsert:t[5]||(t[5]=s=>e(y)({editorId:"templateEditor",text:s}))}),a(ve,{editAllowed:!0,onInsert:t[6]||(t[6]=s=>e(y)({editorId:"templateEditor",text:s}))}),u.$page.props.ai_is_ready_to_use?(n(),_(e(D),{key:0,onInsert:t[7]||(t[7]=s=>e(y)({editorId:"templateEditor",text:s})),onReplace:t[8]||(t[8]=s=>e(B)({editorId:"templateEditor",text:s})),text:r.body},null,8,["text"])):w("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value","onUpdate"]))),128))]),a(E,{responsive:!1,class:"items-center mt-lg"},{default:o(()=>[a(C,{disabled:p.value,type:"submit",class:"mr-xs"},{default:o(()=>[m(c(e(l)("template.save_template")),1)]),_:1},8,["disabled"]),e(i)?w("",!0):(n(),_(C,{key:0,onClick:t[9]||(t[9]=()=>{$(b(),!0)}),disabled:p.value,type:"button"},{default:o(()=>[m(c(e(l)("template.save_create_new")),1)]),_:1},8,["disabled"]))]),_:1})]),_:1})],32)])])],64))}};export{he as default};
