import{u as w,i as d,C as P,o as B,g as N,w as s,e as c,a as t,_ as y,f as r,y as k,I as V,t as m,b as u,k as h,aa as g,a1 as C,n as S}from"./app-BxavtTYs.js";import{_ as K}from"./Panel-Lw-nuda0.js";import{_ as j}from"./ReadDocHelp-BJJzurtq.js";import{_ as G}from"./InputHidden-tNUxRG45.js";import{_ as I}from"./Checkbox-CKdbYkOi.js";import{_ as L}from"./Flex-0eM5h-qJ.js";import{_ as O}from"./Label-BwcuoeD5.js";import{_ as U}from"./LabelSuffix-CL1UEugD.js";import{_ as q}from"./ProviderIcon-DoC9ZFBR.js";import"./Admin-CpLrPT1Z.js";import"./QueueList-CJbQdoC3.js";import"./Eye-hTbiOyAR.js";const D={class:"flex items-center"},E={class:"mr-xs"},F={for:"private_key"},ee={__name:"BlueskyServiceForm",props:{form:{required:!0,type:Object}},setup(o){const{t:i}=w(),p=d("routePrefix"),$=d("confirmation"),f=o,{notify:_}=S(),n=P({}),b=async()=>{if(!f.form.configuration.private_key){await v();return}$().title("Generate new private key").description(i("page.are_you_sure")).onConfirm(async a=>{a.isLoading(!0),v().then(()=>{a.isLoading(!1),a.close()})}).show()},v=()=>new Promise((a,e)=>{g.start(),axios.post(route(`${p}.services.generateBlueskyPrivateKey`)).then(l=>{f.form.configuration.private_key=l.data.private_key,_("success","New private key generated.<br/> Please save the form to apply the changes."),a()}).catch(e).finally(()=>g.done())}),x=()=>{n.value={},C.put(route(`${p}.services.update`,{service:"bluesky"}),f.form,{preserveScroll:!0,onSuccess(){_("success",i("service.service_saved",{service:"Bluesky"}))},onError:a=>{n.value=a}})};return(a,e)=>(B(),N(K,{class:"mt-lg"},{title:s(()=>[c("div",D,[c("span",E,[t(q,{provider:"bluesky"})]),e[2]||(e[2]=c("span",null,"Bluesky",-1))])]),description:s(()=>[t(j,{href:`${a.$page.props.mixpost.docs_link}/services/social/bluesky/`},null,8,["href"])]),default:s(()=>[t(y,{class:"mt-lg"},{title:s(()=>[c("label",F,[e[4]||(e[4]=r("Private Key ")),t(U,{danger:""},{default:s(()=>e[3]||(e[3]=[r("*")])),_:1})])]),footer:s(()=>[t(k,{message:n.value["configuration.private_key"]},null,8,["message"])]),default:s(()=>[c("div",null,[t(G,{modelValue:o.form.configuration.private_key,"onUpdate:modelValue":e[0]||(e[0]=l=>o.form.configuration.private_key=l),error:n.value["configuration.private_key"]!==void 0,disabled:!0,id:"private_key",class:"mb-xs",autocomplete:"off"},null,8,["modelValue","error"]),t(V,{onClick:b,linkStyle:!0},{default:s(()=>e[5]||(e[5]=[r("Generate new private key")])),_:1})])]),_:1}),t(y,{class:"mt-lg"},{title:s(()=>[r(m(u(i)("general.status")),1)]),footer:s(()=>[t(k,{message:n.value.active},null,8,["message"])]),default:s(()=>[t(L,{responsive:!1,class:"items-center"},{default:s(()=>[t(I,{checked:o.form.active,"onUpdate:checked":e[1]||(e[1]=l=>o.form.active=l),id:"active"},null,8,["checked"]),t(O,{for:"active",class:"!mb-0"},{default:s(()=>[r(m(u(i)("general.active")),1)]),_:1})]),_:1})]),_:1}),t(h,{onClick:x,class:"mt-lg"},{default:s(()=>[r(m(u(i)("general.save")),1)]),_:1})]),_:1}))}};export{ee as default};
