import{u as B,i as y,a6 as F,G as I,T as O,c as g,a as r,b as e,e as n,w as a,m as P,k as z,F as L,d as M,o as h,Z as A,h as D,s as G,f as m,t as l,x as Z,j as $,_ as f,y as w,N as k,a1 as H,n as J}from"./app-BxavtTYs.js";import{u as K}from"./usePageMode-DpBFnaK0.js";import{_ as Q}from"./Admin-CpLrPT1Z.js";import{_ as R}from"./PageHeader-BnI1hV_t.js";import{_ as S}from"./Panel-Lw-nuda0.js";import{_ as U}from"./Radio-BACqEdPU.js";import{E as W}from"./Eye-hTbiOyAR.js";import{T as X}from"./Trash-B9tkDRbU.js";import{_ as C}from"./InputHidden-tNUxRG45.js";import"./QueueList-CJbQdoC3.js";import"./Flex-0eM5h-qJ.js";const Y={class:"row-py w-full mx-auto"},ee={key:0,class:"flex"},se={class:"row-px"},re={for:"name"},ae={for:"email"},te={class:"flex items-center space-x-sm rtl:space-x-reverse"},oe={key:0},le={for:"password"},ie={for:"password_confirmation"},ne=M({layout:Q}),be=Object.assign(ne,{__name:"CreateEdit",props:{mode:{type:String,default:"create"},user:{type:Object}},setup(_){const{t}=B(),v=y("routePrefix"),q=y("confirmation"),c=_,{notify:b}=J(),{user:x}=F(),V=I(()=>p.value?t("user.create_user"):"Edit user"),{isCreate:p,isEdit:u}=K(),s=O({name:u.value?c.user.name:"",email:u.value?c.user.email:"",is_admin:u.value?c.user.is_admin:!1,password:"",password_confirmation:""}),E=()=>{s.post(route("mixpost.users.store"),{preserveScroll:!0,preserveState:!0})},N=()=>{s.put(route("mixpost.users.update",{user:c.user.id}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{const d=[t("user.user_has_been_updated"),t("auth.password_has_been_changed")];b("success",s.password?d.join(`
`):d[0])}})},j=()=>{p.value&&E(),u.value&&N()},T=()=>{q().title(t("user.delete_user")).description(t("user.confirm_delete_user")).destructive().onConfirm(d=>{d.isLoading(!0),H.delete(route(`${v}.users.delete`,{user:c.user.id}),{onSuccess(o){o.props.flash.error||b("success",t("user.delete_user"))},onFinish(){d.isLoading(!1)}})}).show()};return(d,o)=>(h(),g(L,null,[r(e(A),{title:V.value},null,8,["title"]),n("div",Y,[r(R,{title:V.value},{default:a(()=>[e(u)?(h(),g("div",ee,[r(e(D),{href:d.route(`${e(v)}.users.view`,{user:_.user.id}),class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:a(()=>[r(G,{size:"sm"},{icon:a(()=>[r(W)]),default:a(()=>[m(" "+l(e(t)("general.view")),1)]),_:1})]),_:1},8,["href"]),r(Z,{onClick:T,size:"sm"},{icon:a(()=>[r(X)]),_:1})])):$("",!0)]),_:1},8,["title"]),n("div",se,[n("form",{method:"post",onSubmit:P(j,["prevent"])},[r(S,null,{title:a(()=>[m(l(e(t)("user.user_details")),1)]),default:a(()=>[r(f,null,{title:a(()=>[n("label",re,l(e(t)("general.name")),1)]),footer:a(()=>[r(w,{message:e(s).errors.name},null,8,["message"])]),default:a(()=>[r(k,{modelValue:e(s).name,"onUpdate:modelValue":o[0]||(o[0]=i=>e(s).name=i),error:e(s).errors.name,type:"text",id:"name",class:"w-full",autofocus:"",required:""},null,8,["modelValue","error"])]),_:1}),r(f,{class:"mt-lg"},{title:a(()=>[n("label",ae,l(e(t)("general.email")),1)]),footer:a(()=>[r(w,{message:e(s).errors.email},null,8,["message"])]),default:a(()=>[r(k,{modelValue:e(s).email,"onUpdate:modelValue":o[1]||(o[1]=i=>e(s).email=i),error:e(s).errors.email,type:"email",id:"email",class:"w-full",autocomplete:"off",required:""},null,8,["modelValue","error"])]),_:1}),r(f,{class:"mt-lg"},{title:a(()=>[m(l(e(t)("user.system_admin")),1)]),default:a(()=>[n("div",te,[n("label",null,[r(U,{checked:e(s).is_admin,"onUpdate:checked":o[2]||(o[2]=i=>e(s).is_admin=i),value:!1,disabled:e(u)&&_.user.id===e(x).id},null,8,["checked","disabled"]),m(" "+l(e(t)("general.no")),1)]),n("label",null,[r(U,{checked:e(s).is_admin,"onUpdate:checked":o[3]||(o[3]=i=>e(s).is_admin=i),value:!0,disabled:e(u)&&_.user.id===e(x).id},null,8,["checked","disabled"]),m(" "+l(e(t)("general.yes")),1)])])]),_:1})]),_:1}),r(S,{class:"mt-lg"},{title:a(()=>[m(l(e(t)("auth.password")),1)]),description:a(()=>[e(u)?(h(),g("span",oe,l(e(t)("auth.leave_blank_password")),1)):$("",!0)]),default:a(()=>[r(f,null,{title:a(()=>[n("label",le,l(e(t)("auth.password")),1)]),footer:a(()=>[r(w,{message:e(s).errors.password},null,8,["message"])]),default:a(()=>[r(C,{modelValue:e(s).password,"onUpdate:modelValue":o[4]||(o[4]=i=>e(s).password=i),error:e(s).errors.password,id:"password",required:e(p),autocomplete:"new-password"},null,8,["modelValue","error","required"])]),_:1}),r(f,{class:"mt-lg"},{title:a(()=>[n("label",ie,l(e(t)("auth.confirm_password")),1)]),footer:a(()=>[r(w,{message:e(s).errors.password_confirmation},null,8,["message"])]),default:a(()=>[r(C,{modelValue:e(s).password_confirmation,"onUpdate:modelValue":o[5]||(o[5]=i=>e(s).password_confirmation=i),error:e(s).errors.password_confirmation,id:"password_confirmation",required:!!e(s).password,autocomplete:"new-password"},null,8,["modelValue","error","required"])]),_:1})]),_:1}),r(z,{type:"submit",disabled:e(s).processing,class:"mt-lg"},{default:a(()=>[m(l(e(p)?e(t)("general.create"):e(t)("general.update")),1)]),_:1},8,["disabled"])],32)])])],64))}});export{be as default};
