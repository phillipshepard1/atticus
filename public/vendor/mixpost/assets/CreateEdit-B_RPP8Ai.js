import{u as M,i as y,G as P,C as b,T as q,L as A,c as V,a as s,b as e,e as d,w as o,m as F,O as R,F as U,d as W,l as D,o as k,Z as G,h as S,s as v,f as l,t as n,x as H,j as x,_ as T,N as Z,y as J,ac as K,k as E,g as L,ad as Q,a1 as X,n as Y}from"./app-BxavtTYs.js";import{_ as ee}from"./Admin-CpLrPT1Z.js";import{u as oe}from"./usePageMode-DpBFnaK0.js";import{_ as se}from"./PageHeader-BnI1hV_t.js";import{_ as ae}from"./Panel-Lw-nuda0.js";import{_ as te}from"./ColorPicker-DBmIy9bp.js";import{E as re}from"./Eye-hTbiOyAR.js";import{T as le}from"./Trash-B9tkDRbU.js";import{A as ne}from"./ArrowTopRightOnSquare-IL6rJNOT.js";import{_ as ce}from"./Flex-0eM5h-qJ.js";import"./QueueList-CJbQdoC3.js";const ue={class:"row-py w-full mx-auto"},ie={key:0,class:"flex"},me={class:"row-px"},de={for:"name"},pe={class:"w-full"},fe=W({layout:ee}),Ve=Object.assign(fe,{__name:"CreateEdit",props:{mode:{required:!0,type:String,default:"create"},workspace:{type:Object}},setup(g){const{t:a}=M(),p=g,{notify:h}=Y(),w=y("routePrefix"),O=y("confirmation"),$=P(()=>i.value?a("workspace.create_workspace"):a("workspace.edit_workspace")),{isCreate:i,isEdit:f}=oe(),m=b(!1),_=b(""),c=q({name:f.value?p.workspace.name:"",hex_color:f.value?p.workspace.hex_color:""}),N=()=>{c.hex_color=_.value,m.value=!1},j=()=>{const r=Q();return r[D.random(0,r.length-1)]};A(()=>{if(i.value){const r=j();c.hex_color=r,_.value=r}f.value&&(_.value=p.workspace.hex_color)});const C=(r=!1)=>{c.transform(t=>({...t,login:r})).post(route(`${w}.workspaces.store`))},z=()=>{c.put(route(`${w}.workspaces.update`,{workspace:p.workspace.uuid}),{onSuccess:()=>{h("success",a("workspace.workspace_updated"))}})},B=()=>{O().title(a("workspace.delete_workspace")).description(a("workspace.confirm_delete_workspace")).destructive().onConfirm(r=>{r.isLoading(!0),X.delete(route(`${w}.workspaces.delete`,{workspace:p.workspace.uuid}),{preserveScroll:!0,onSuccess(){h("success",a("workspace.workspace_deleted"))},onFinish(){r.reset()}})}).show()},I=()=>{i.value&&C(),f.value&&z()};return(r,t)=>(k(),V(U,null,[s(e(G),{title:$.value},null,8,["title"]),d("div",ue,[s(se,{title:$.value},{default:o(()=>[e(f)?(k(),V("div",ie,[s(e(S),{href:r.route("mixpost.switchWorkspace",{workspace:g.workspace.uuid,redirect:!0}),method:"post",as:"button",type:"button",class:"mr-xs"},{default:o(()=>[s(v,{size:"sm"},{icon:o(()=>[s(ne)]),default:o(()=>[l(" "+n(e(a)("general.open")),1)]),_:1})]),_:1},8,["href"]),s(e(S),{href:r.route(`${e(w)}.workspaces.view`,{workspace:g.workspace.uuid}),class:"mr-xs"},{default:o(()=>[s(v,{size:"sm"},{icon:o(()=>[s(re)]),default:o(()=>[l(" "+n(e(a)("general.view")),1)]),_:1})]),_:1},8,["href"]),s(H,{onClick:B,size:"sm"},{icon:o(()=>[s(le)]),_:1})])):x("",!0)]),_:1},8,["title"]),d("div",me,[d("form",{method:"post",onSubmit:F(I,["prevent"])},[s(ae,null,{title:o(()=>[l(n(e(a)("general.details")),1)]),default:o(()=>[s(T,null,{title:o(()=>[d("label",de,n(e(a)("general.name")),1)]),default:o(()=>[d("div",pe,[s(Z,{modelValue:e(c).name,"onUpdate:modelValue":t[0]||(t[0]=u=>e(c).name=u),type:"text",id:"name",placeholder:e(a)("workspace.workspace_name"),class:"w-full",autocomplete:"off",autofocus:e(i),required:""},null,8,["modelValue","placeholder","autofocus"]),s(J,{message:e(c).errors.name,class:"mt-1"},null,8,["message"])])]),_:1}),s(T,{class:"mt-lg"},{title:o(()=>t[6]||(t[6]=[l(" Color ")])),default:o(()=>[d("div",{onClick:t[1]||(t[1]=u=>m.value=!0),style:K({background:e(c).hex_color}),role:"button",type:"button",class:"w-xl h-xl rounded-md"},null,4)]),_:1}),s(ce,{class:"mt-lg"},{default:o(()=>[s(E,{type:"submit"},{default:o(()=>[l(n(e(i)?e(a)("general.create"):e(a)("general.update")),1)]),_:1}),e(i)?(k(),L(v,{key:0,onClick:t[2]||(t[2]=u=>C(!0)),type:"button",class:"ml-xs"},{default:o(()=>[l(n(e(a)("workspace.create_and_login")),1)]),_:1})):x("",!0)]),_:1})]),_:1})],32)])]),s(R,{show:m.value,"max-width":"md",onClose:t[5]||(t[5]=u=>m.value=!1)},{header:o(()=>[l(n(e(a)("workspace.change_workspace_color")),1)]),body:o(()=>[m.value?(k(),L(te,{key:0,modelValue:_.value,"onUpdate:modelValue":t[3]||(t[3]=u=>_.value=u)},null,8,["modelValue"])):x("",!0)]),footer:o(()=>[s(v,{onClick:t[4]||(t[4]=u=>m.value=!1),class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:o(()=>[l(n(e(a)("general.cancel")),1)]),_:1}),s(E,{onClick:N},{default:o(()=>[l(n(e(a)("general.done")),1)]),_:1})]),_:1},8,["show"])],64))}});export{Ve as default};
