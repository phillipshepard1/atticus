import{aS as j,C,q as N,o as d,c as p,e as n,a as r,w as a,t as o,F as k,r as T,b as s,H as q,f,k as E,v as B,g as U,h as A,l as F,u as D,j as w,X as W,aF as H,i as Z,T as z,ax as K,Z as L,s as S,x as X,n as Y}from"./app-BxavtTYs.js";import{_ as G}from"./PageHeader-BnI1hV_t.js";import{_ as b}from"./Panel-Lw-nuda0.js";import{W as I}from"./constants-BK-AY4Ot.js";import{u as P}from"./useSettings-D__f9cI1.js";import{_ as J}from"./Select-B7cBiASc.js";import{E as M}from"./ExclamationCircle-DvHPQVk8.js";import{F as O,_ as Q}from"./Switch-icePWX8g.js";import{_ as R}from"./PureDangerButton-zhKtSmpI.js";import"./Flex-0eM5h-qJ.js";import"./vue.runtime.esm-bundler-DpHW48Ps.js";function ee(g,i){const _=g.querySelector(".flatpickr-hour").value,v=g.querySelector(".flatpickr-minute").value;if(i===24)return`${_}:${v}`;if(i===12){const x=g.querySelector(".flatpickr-am-pm").innerText;return j(`${_}:${v} ${x}`)}}const te={class:"flex flex-col sm:flex-row gap-sm sm:gap-0"},se={value:"everyday"},oe=["value"],le={class:"mr-xs rtl:mr-0 rtl:ml-lg text-gray-400"},ie={class:"text-sm flex items-center mt-md"},ae={class:"mr-xs rtl:mr-0 rtl:ml-xs"},ne={__name:"AddPostingTime",props:["modelValue"],emits:["update:modelValue"],setup(g,{emit:i}){const _=g,v=i,{timeZone:x,timeFormat:c}=P(),u=C({day:"everyday",time:"06:30"}),y=C(),$={inline:!0,timeFormat:"H:i",noCalendar:!0,enableTime:!0,time_24hr:c===24},m=()=>{const t=F.cloneDeep(_.modelValue),e=u.value.day==="everyday";u.value.value=ee(y.value,c);const h=l=>{l.times.some(V=>V.value===u.value.time)||l.times.push({value:u.value.time})};if(e)t.forEach(h);else{const l=t.findIndex(V=>parseInt(V.id)===parseInt(u.value.day));l!==-1&&h(t[l])}v("update:modelValue",t)};return(t,e)=>{const h=N("tooltip");return d(),p(k,null,[n("div",te,[n("div",null,[r(J,{modelValue:u.value.day,"onUpdate:modelValue":e[0]||(e[0]=l=>u.value.day=l)},{default:a(()=>[n("option",se,o(t.$t("posting_schedule.everyday")),1),(d(!0),p(k,null,T(s(I),l=>(d(),p("option",{key:l.id,value:l.id},o(t.$t(`calendar.weekdays.${l.key}.full`)),9,oe))),128))]),_:1},8,["modelValue"])]),n("div",{class:q([{"sm:w-40":s(c)===12,"sm:w-56":s(c)===24},"pickTime flex items-center sm:justify-center sm:mr-lg sm:-mt-1"])},[n("div",le,o(t.$t("general.time")),1),n("div",{class:"w-auto",ref_key:"timePicker",ref:y},[r(s(O),{modelValue:u.value.time,"onUpdate:modelValue":e[1]||(e[1]=l=>u.value.time=l),config:$},null,8,["modelValue"])],512)],2),n("div",null,[r(E,{onClick:m},{default:a(()=>[f(o(t.$t("posting_schedule.add_post_time")),1)]),_:1})])]),n("div",ie,[n("div",ae,o(s(x)),1),B((d(),U(s(A),{href:t.route("mixpost.profile.index")},{default:a(()=>[r(M,{class:"!w-4 !h-4"})]),_:1},8,["href"])),[[h,t.$t("posting_schedule.posting_times_determined")]])])],64)}}},re={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-xs"},ue={class:"font-medium text-center"},me={class:"flex justify-center mt-xs"},ce={class:"mr-xs"},de={key:0},pe={key:1},_e={class:"flex flex-col justify-center mt-xs mx-auto"},fe={key:0,class:"text-gray-500 text-sm text-center"},ge={class:"flex absolute right-0 opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-200"},ve={__name:"PostingTimes",props:{times:{type:Array,default:[]}},emits:["update"],setup(g,{emit:i}){const{t:_}=D(),v=g,{timeFormat:x}=P(),c=m=>{const t=I.find(e=>e.id===m);return t?_(`calendar.weekdays.${t.key}.full`):null},u=m=>F.sortBy(m.times,[e=>e.value]).map(e=>({originalValue:e.value,formatValue:y(e.value)})),y=m=>x===12?H(m,"hh:mm aaa"):m,$=(m,t)=>{const e=v.times[m].times.findIndex(h=>h.value===t);v.times[m].times.splice(e,1)};return(m,t)=>(d(),p("div",re,[(d(!0),p(k,null,T(g.times,(e,h)=>(d(),p("div",{key:e.id,class:"flex flex-col border border-gray-300 rounded-lg p-xs"},[n("div",ue,o(c(e.id)),1),n("div",me,[r(Q,{modelValue:e.status,"onUpdate:modelValue":l=>e.status=l},{default:a(()=>[n("span",ce,[e.status?(d(),p("span",de,o(s(_)("general.on")),1)):w("",!0),e.status?w("",!0):(d(),p("span",pe,o(s(_)("general.off")),1))])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),n("div",_e,[e.times.length?w("",!0):(d(),p("span",fe,o(s(_)("general.empty")),1)),e.times.length?(d(!0),p(k,{key:1},T(u(e),l=>(d(),p("div",{key:l.value,class:"relative flex items-center justify-between px-lg py-xs group text-gray-500 text-sm"},[n("span",null,o(l.formatValue.split(":")[0]),1),t[0]||(t[0]=n("span",null,":",-1)),n("span",null,o(l.formatValue.split(":")[1]),1),n("span",ge,[r(R,{onClick:V=>$(h,l.originalValue)},{default:a(()=>[r(W,{class:"!w-5 !-5"})]),_:2},1032,["onClick"])])]))),128)):w("",!0)])]))),128))]))}},he={class:"w-full mx-auto row-py"},xe={class:"w-full row-px"},De={__name:"PostingSchedule",props:{times:{required:!0,type:Array}},setup(g){const{t:i}=D(),_=Z("workspaceCtx"),v=g,{notify:x}=Y(),c=z({times:v.times}),u=C(!1),y=()=>{c.times.forEach(m=>{m.times=[]}),u.value=!1},$=()=>{c.put(route("mixpost.postingSchedule.update",{workspace:_.id}),{preserveScroll:!0,onSuccess(){x("success",i("posting_schedule.posting_times_updated"))}})};return(m,t)=>(d(),p(k,null,[r(s(L),{title:s(i)("posting_schedule.posting_schedule")},null,8,["title"]),n("div",he,[r(G,{title:s(i)("posting_schedule.posting_schedule")},{description:a(()=>[f(o(s(i)("posting_schedule.send_posting_schedule")),1)]),_:1},8,["title"]),n("div",xe,[r(b,null,{title:a(()=>[f(o(s(i)("posting_schedule.add_new_posting_time")),1)]),default:a(()=>[r(ne,{modelValue:s(c).times,"onUpdate:modelValue":t[0]||(t[0]=e=>s(c).times=e)},null,8,["modelValue"])]),_:1}),r(b,{class:"mt-lg"},{title:a(()=>[f(o(s(i)("posting_schedule.posting_times")),1)]),description:a(()=>[f(o(s(i)("posting_schedule.send_posting_schedule")),1)]),action:a(()=>[r(S,{onClick:t[1]||(t[1]=e=>u.value=!0)},{default:a(()=>[f(o(s(i)("posting_schedule.clear_all_posting_times")),1)]),_:1})]),default:a(()=>[r(ve,{times:s(c).times},null,8,["times"])]),_:1}),r(E,{onClick:$,disabled:s(c).processing,class:"mt-md"},{default:a(()=>[f(o(s(i)("posting_schedule.update_posting_times")),1)]),_:1},8,["disabled"])])]),r(K,{show:u.value,variant:"danger",onClose:t[3]||(t[3]=e=>u.value=!1)},{header:a(()=>[f(o(s(i)("posting_schedule.clear_all_posting_times")),1)]),body:a(()=>[f(o(s(i)("posting_schedule.confirmation_posting_times")),1)]),footer:a(()=>[r(S,{onClick:t[2]||(t[2]=e=>u.value=!1),class:"mr-xs"},{default:a(()=>[f(o(s(i)("general.cancel")),1)]),_:1}),r(X,{onClick:y},{default:a(()=>[f(o(s(i)("general.delete")),1)]),_:1})]),_:1},8,["show"])],64))}};export{De as default};
